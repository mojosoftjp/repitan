# ãƒªãƒ”ãŸã‚“ - è‹±å˜èªæš—è¨˜ã‚¢ãƒ—ãƒª è©³ç´°è¨­è¨ˆæ›¸

## 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### 1.1 ã‚¢ãƒ—ãƒªå
**ãƒªãƒ”ãŸã‚“**ï¼ˆRepitanï¼‰

- **ç”±æ¥**: Repeatï¼ˆç¹°ã‚Šè¿”ã—ï¼‰ + å˜èª = ãƒªãƒ”ãŸã‚“
- **è‹±èªè¡¨è¨˜**: Repitan
- **Bundle ID**: biz.mojosoft.repitan
- **å…¬é–‹åœ°åŸŸ**: æ—¥æœ¬ã®ã¿

### 1.2 ã‚³ãƒ³ã‚»ãƒ—ãƒˆ
ç§‘å­¦çš„ã«å®Ÿè¨¼ã•ã‚ŒãŸå­¦ç¿’æ³•ï¼ˆé–“éš”åå¾© Ã— æƒ³èµ·ç·´ç¿’ Ã— å³æ™‚ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼‰ã‚’æ¡ç”¨ã—ãŸã€ä¸­å­¦ç”Ÿå‘ã‘è‹±å˜èªæš—è¨˜ã‚¢ãƒ—ãƒªã€‚è¦ªãŒé€²æ—ã‚’ç¢ºèªã§ãã€æ•™ç§‘æ›¸å¯¾å¿œã®å˜èªã‚»ãƒƒãƒˆã§åŠ¹ç‡çš„ã«å­¦ç¿’ã§ãã‚‹ã€‚

### 1.3 ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã€Œãƒªãƒ”ãŸã‚“ã€
- **å½¹å‰²**: ã‚¢ãƒ—ãƒªã®ãƒã‚¹ã‚³ãƒƒãƒˆã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼
- **æ€§æ ¼**: æ˜ã‚‹ãå‰å‘ãã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å¿œæ´
- **æ´»ç”¨ã‚·ãƒ¼ãƒ³**:
  - ã‚¹ãƒˆãƒªãƒ¼ã‚¯ç¶™ç¶šæ™‚ â†’ å–œã¶ãƒ»è¤’ã‚ã‚‹
  - å­¦ç¿’å®Œäº†æ™‚ â†’ æ‹æ‰‹ãƒ»ãŠç¥ã„
  - ä¹…ã—ã¶ã‚Šã®èµ·å‹• â†’ å¾…ã£ã¦ãŸã‚ˆï¼ã¨æ­“è¿
  - é–“é•ãˆãŸæ™‚ â†’ åŠ±ã¾ã™ï¼ˆå¤§ä¸ˆå¤«ã€æ¬¡ã¯è¦šãˆã‚‰ã‚Œã‚‹ã‚ˆï¼ï¼‰
- **ãƒ‡ã‚¶ã‚¤ãƒ³æ–¹å‘æ€§**: å¯æ„›ã„å‹•ç‰©ç³» or ã‚·ãƒ³ãƒ—ãƒ«ãªãƒã‚¹ã‚³ãƒƒãƒˆï¼ˆå°†æ¥æ¤œè¨ï¼‰

### 1.4 ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼
- **ãƒ¡ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼**: ä¸­å­¦1ã€œ3å¹´ç”Ÿ
- **ã‚µãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼**: ä¿è­·è€…ï¼ˆé€²æ—ç¢ºèªï¼‰
- **æ‹¡å¼µã‚¿ãƒ¼ã‚²ãƒƒãƒˆ**: é«˜æ ¡å—é¨“ç”Ÿã€è‹±æ¤œå¯¾ç­–è€…

### 1.5 æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **è¨€èª**: Swift 5.9+
- **UI**: SwiftUI
- **ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–**: SwiftData
- **æœ€å°OS**: iOS 17.0+
- **éŸ³å£°èªè­˜**: Speech Framework
- **ã‚¯ãƒ©ã‚¦ãƒ‰åŒæœŸ**: CloudKitï¼ˆå°†æ¥å®Ÿè£…ï¼‰
- **èª²é‡‘**: StoreKit 2

---

## 2. æ©Ÿèƒ½ä¸€è¦§

### 2.1 ã‚³ã‚¢æ©Ÿèƒ½ï¼ˆMVPï¼‰

| æ©Ÿèƒ½ID | æ©Ÿèƒ½å | å„ªå…ˆåº¦ | èª¬æ˜ |
|--------|--------|--------|------|
| F-001 | ã‚«ãƒ¼ãƒ‰ç®¡ç† | å¿…é ˆ | å˜èªã‚«ãƒ¼ãƒ‰ã®è¿½åŠ ãƒ»ç·¨é›†ãƒ»å‰Šé™¤ |
| F-002 | å­¦ç¿’ã‚»ãƒƒã‚·ãƒ§ãƒ³ | å¿…é ˆ | æ–°è¦å­¦ç¿’ + å¾©ç¿’ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ |
| F-003 | SM-2ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ  | å¿…é ˆ | é–“éš”åå¾©ã®è‡ªå‹•è¨ˆç®— |
| F-004 | ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ | å¿…é ˆ | æƒ³èµ·ç·´ç¿’ï¼ˆè‡ªå·±ç”³å‘Šå¼ï¼‰ |
| F-005 | é€²æ—ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ | å¿…é ˆ | ä»Šæ—¥ã®ç›®æ¨™ã€ã‚¹ãƒˆãƒªãƒ¼ã‚¯è¡¨ç¤º |

### 2.2 æ‹¡å¼µæ©Ÿèƒ½ï¼ˆPhase 2ï¼‰

| æ©Ÿèƒ½ID | æ©Ÿèƒ½å | å„ªå…ˆåº¦ | èª¬æ˜ |
|--------|--------|--------|------|
| F-101 | éŸ³å£°èªè­˜ | é«˜ | ç™ºéŸ³ã§å›ç­” |
| F-102 | æ•™ç§‘æ›¸åˆ¥å˜èªã‚»ãƒƒãƒˆ | é«˜ | New Horizon, Sunshineç­‰ |
| F-103 | è¦ªå‘ã‘ãƒ¬ãƒãƒ¼ãƒˆ | é«˜ | é€±é–“ãƒ¬ãƒãƒ¼ãƒˆã€é€šçŸ¥ |
| F-104 | CSV/JSONèª­ã¿è¾¼ã¿ | ä¸­ | ä¸€æ‹¬ã‚¤ãƒ³ãƒãƒ¼ãƒˆ |
| F-105 | ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ | ä¸­ | ãƒãƒƒã‚¸ã€ãƒ¬ãƒ™ãƒ«ã€å®Ÿç¸¾ |

### 2.3 å°†æ¥æ©Ÿèƒ½ï¼ˆPhase 3ï¼‰

| æ©Ÿèƒ½ID | æ©Ÿèƒ½å | å„ªå…ˆåº¦ | èª¬æ˜ |
|--------|--------|--------|------|
| F-201 | CloudKitåŒæœŸ | ä¸­ | ãƒ‡ãƒã‚¤ã‚¹é–“åŒæœŸ |
| F-202 | åºƒå‘Šå‰Šé™¤èª²é‡‘ | é«˜ | StoreKit 2 |
| F-203 | å˜èªã‚»ãƒƒãƒˆå…±æœ‰ | ä½ | URLã‚¹ã‚­ãƒ¼ãƒ ã§å…±æœ‰ |
| F-204 | ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ | ä½ | ä»Šæ—¥ã®å˜èªè¡¨ç¤º |

---

## 3. ç”»é¢è¨­è¨ˆ

### 3.1 ç”»é¢é·ç§»å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        TabView                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ãƒ›ãƒ¼ãƒ     â”‚   å­¦ç¿’      â”‚  ã‚«ãƒ¼ãƒ‰ç®¡ç†  â”‚     è¨­å®š           â”‚
â”‚  (Tab 1)    â”‚  (Tab 2)    â”‚   (Tab 3)   â”‚    (Tab 4)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚             â”‚             â”‚              â”‚
       â–¼             â–¼             â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ãƒ€ãƒƒã‚·ãƒ¥   â”‚ â”‚å­¦ç¿’ã‚»ãƒƒ   â”‚ â”‚ãƒ‡ãƒƒã‚­ä¸€è¦§ â”‚ â”‚ ä¸€èˆ¬è¨­å®š        â”‚
â”‚ãƒœãƒ¼ãƒ‰     â”‚ â”‚ã‚·ãƒ§ãƒ³     â”‚ â”‚           â”‚ â”‚ è¦ªå‘ã‘ãƒ¬ãƒãƒ¼ãƒˆ  â”‚
â”‚           â”‚ â”‚é¸æŠ       â”‚ â”‚           â”‚ â”‚ èª²é‡‘            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚             â”‚             â”‚
       â”‚             â–¼             â–¼
       â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚      â”‚æ–°è¦å­¦ç¿’   â”‚ â”‚ã‚«ãƒ¼ãƒ‰ä¸€è¦§ â”‚
       â”‚      â”‚ç”»é¢       â”‚ â”‚           â”‚
       â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚             â”‚             â”‚
       â”‚             â–¼             â–¼
       â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚      â”‚ãƒ†ã‚¹ãƒˆ     â”‚ â”‚ã‚«ãƒ¼ãƒ‰è¿½åŠ  â”‚
       â”‚      â”‚ç”»é¢       â”‚ â”‚/ç·¨é›†      â”‚
       â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚             â”‚
       â”‚             â–¼
       â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚      â”‚ã‚»ãƒƒã‚·ãƒ§ãƒ³ â”‚
       â”‚      â”‚çµæœ       â”‚
       â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¦ªå‘ã‘        â”‚
â”‚ ãƒ¬ãƒãƒ¼ãƒˆç”»é¢  â”‚
â”‚ (PINä¿è­·)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 å„ç”»é¢ã®è©³ç´°

#### 3.2.1 ãƒ›ãƒ¼ãƒ ç”»é¢ï¼ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ãƒªãƒ”ãŸã‚“           âš™ï¸        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”¥ é€£ç¶š 12 æ—¥ç›®ï¼              â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ä»Šæ—¥ã®ç›®æ¨™              â”‚   â”‚
â”‚  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 8/10 èª    â”‚   â”‚
â”‚  â”‚ æ–°è¦: 5èª  å¾©ç¿’: 3èª    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“Š ä»Šé€±ã®æˆç¸¾           â”‚   â”‚
â”‚  â”‚ è¦šãˆãŸå˜èª: 42èª        â”‚   â”‚
â”‚  â”‚ å¹³å‡æ­£ç­”ç‡: 85%         â”‚   â”‚
â”‚  â”‚ å­¦ç¿’æ™‚é–“: 2æ™‚é–“15åˆ†     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   ğŸ¯ å­¦ç¿’ã‚’å§‹ã‚ã‚‹       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ è¦ªå‘ã‘ãƒ¬ãƒãƒ¼ãƒˆ â†’          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2.2 å­¦ç¿’ã‚»ãƒƒã‚·ãƒ§ãƒ³é¸æŠç”»é¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† å­¦ç¿’                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  ä»Šæ—¥ã‚„ã‚‹ã“ã¨                   â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“˜ æ–°è¦å­¦ç¿’              â”‚   â”‚
â”‚  â”‚ 10èªã®æ–°ã—ã„å˜èª         â”‚   â”‚
â”‚  â”‚ ç´„8åˆ†                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ”„ å¾©ç¿’                  â”‚   â”‚
â”‚  â”‚ 15èªã®å¾©ç¿’ãŒå¿…è¦         â”‚   â”‚
â”‚  â”‚ ç´„10åˆ†                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ âš¡ ãŠã¾ã‹ã›å­¦ç¿’          â”‚   â”‚
â”‚  â”‚ æ–°è¦ + å¾©ç¿’ã‚’è‡ªå‹•é¸æŠ    â”‚   â”‚
â”‚  â”‚ ç´„15åˆ†                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2.3 æ–°è¦å­¦ç¿’ç”»é¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ•                    1/10     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚                                 â”‚
â”‚           é‡è¦ãª                â”‚
â”‚                                 â”‚
â”‚                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                 â”‚
â”‚                                 â”‚
â”‚        important               â”‚
â”‚        /ÉªmËˆpÉ”ËrtÉ™nt/           â”‚
â”‚                                 â”‚
â”‚        ğŸ”Š ç™ºéŸ³ã‚’èã            â”‚
â”‚                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                 â”‚
â”‚  ä¾‹æ–‡:                          â”‚
â”‚  This is an important test.    â”‚
â”‚  ã“ã‚Œã¯é‡è¦ãªãƒ†ã‚¹ãƒˆã§ã™ã€‚       â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚      è¦šãˆãŸ â†’ æ¬¡ã¸       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2.4 ãƒ†ã‚¹ãƒˆç”»é¢ï¼ˆæƒ³èµ·ç·´ç¿’ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ•                    3/15     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚                                 â”‚
â”‚                                 â”‚
â”‚           é‡è¦ãª                â”‚
â”‚                                 â”‚
â”‚         ã“ã®æ„å‘³ã®              â”‚
â”‚        è‹±å˜èªã¯ï¼Ÿ               â”‚
â”‚                                 â”‚
â”‚                                 â”‚
â”‚                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                 â”‚
â”‚  å›ç­”æ–¹æ³•ã‚’é¸æŠ:                â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚    ğŸ¤ å£°ã§ç­”ãˆã‚‹         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚    âŒ¨ï¸ å…¥åŠ›ã—ã¦ç­”ãˆã‚‹     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚    ğŸ’­ é ­ã§è€ƒãˆã¦ç­”ãˆã‚‹   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2.5 ãƒ†ã‚¹ãƒˆçµæœç”»é¢ï¼ˆè‡ªå·±ç”³å‘Šï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ•                    3/15     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚           é‡è¦ãª                â”‚
â”‚                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                 â”‚
â”‚         important              â”‚
â”‚         /ÉªmËˆpÉ”ËrtÉ™nt/          â”‚
â”‚                                 â”‚
â”‚         ğŸ”Š ç™ºéŸ³ã‚’èã           â”‚
â”‚                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                 â”‚
â”‚  ã©ã®ãã‚‰ã„ã§ããŸï¼Ÿ             â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ˜°    â”‚ â”‚ ğŸ¤”    â”‚ â”‚ ğŸ˜Š    â”‚ â”‚
â”‚  â”‚å…¨ç„¶   â”‚ â”‚å°‘ã—   â”‚ â”‚å®Œç’§ï¼ â”‚ â”‚
â”‚  â”‚ãƒ€ãƒ¡   â”‚ â”‚è€ƒãˆãŸ â”‚ â”‚       â”‚ â”‚
â”‚  â”‚       â”‚ â”‚       â”‚ â”‚       â”‚ â”‚
â”‚  â”‚1æ—¥å¾Œ  â”‚ â”‚3æ—¥å¾Œ  â”‚ â”‚7æ—¥å¾Œ  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2.6 ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†ç”»é¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 â”‚
â”‚           ğŸ‰                    â”‚
â”‚                                 â”‚
â”‚      ä»Šæ—¥ã®å­¦ç¿’å®Œäº†ï¼           â”‚
â”‚                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                 â”‚
â”‚      å­¦ç¿’ã—ãŸå˜èª: 25èª         â”‚
â”‚      æ­£ç­”ç‡: 84%                â”‚
â”‚      å­¦ç¿’æ™‚é–“: 18åˆ†             â”‚
â”‚                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                 â”‚
â”‚      ğŸ”¥ é€£ç¶š 12 æ—¥ç›®ï¼          â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   ğŸ  ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚       ã‚‚ã†å°‘ã—å­¦ç¿’ã™ã‚‹ â†’        â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2.7 ã‚«ãƒ¼ãƒ‰ç®¡ç†ç”»é¢ï¼ˆãƒ‡ãƒƒã‚­ä¸€è¦§ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ã‚«ãƒ¼ãƒ‰ç®¡ç†              ï¼‹     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  ğŸ” æ¤œç´¢...                     â”‚
â”‚                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ğŸ“š æ•™ç§‘æ›¸åˆ¥                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“˜ New Horizon 1å¹´      â”‚ > â”‚
â”‚  â”‚ 120èª / å®Œäº†: 45èª      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“— New Horizon 2å¹´      â”‚ > â”‚
â”‚  â”‚ 150èª / å®Œäº†: 0èª       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ğŸ“ ãƒã‚¤ãƒ‡ãƒƒã‚­                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“’ è‹±æ¤œ5ç´šå¯¾ç­–          â”‚ > â”‚
â”‚  â”‚ 50èª / å®Œäº†: 30èª       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â• æ–°ã—ã„ãƒ‡ãƒƒã‚­ã‚’ä½œæˆ    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2.8 ãƒ‡ãƒƒã‚­ä½œæˆç”»é¢ï¼ˆæ–°è¦è¿½åŠ ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ• æ–°ã—ã„ãƒ‡ãƒƒã‚­         ä¿å­˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  ãƒ‡ãƒƒã‚­å *                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æœŸæœ«ãƒ†ã‚¹ãƒˆå¯¾ç­–          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  èª¬æ˜ï¼ˆä»»æ„ï¼‰                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 2å­¦æœŸæœŸæœ«ãƒ†ã‚¹ãƒˆç¯„å›²     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  ã‚¢ã‚¤ã‚³ãƒ³                       â”‚
â”‚  â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”      â”‚
â”‚  â”‚ğŸ“˜â”‚ â”‚ğŸ“—â”‚ â”‚ğŸ“™â”‚ â”‚ğŸ“•â”‚ ...    â”‚
â”‚  â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜      â”‚
â”‚                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ã‚«ãƒ¼ãƒ‰ã®è¿½åŠ æ–¹æ³•               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ âœï¸ æ‰‹å‹•ã§è¿½åŠ             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“„ CSVã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆ     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2.9 ã‚«ãƒ¼ãƒ‰è¿½åŠ ãƒ»ç·¨é›†ç”»é¢ï¼ˆæ–°è¦è¿½åŠ ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ• ã‚«ãƒ¼ãƒ‰ã‚’è¿½åŠ           ä¿å­˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  æ—¥æœ¬èªï¼ˆæ„å‘³ï¼‰*                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ é‡è¦ãª                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  è‹±å˜èª *                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ important                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  ç™ºéŸ³è¨˜å·ï¼ˆä»»æ„ï¼‰               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ /ÉªmËˆpÉ”ËrtÉ™nt/           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  ä¾‹æ–‡ãƒ»è‹±èªï¼ˆä»»æ„ï¼‰             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ This is important.       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  ä¾‹æ–‡ãƒ»æ—¥æœ¬èªï¼ˆä»»æ„ï¼‰           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ã“ã‚Œã¯é‡è¦ã§ã™ã€‚         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â• ç¶šã‘ã¦è¿½åŠ             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2.10 è¦ªå‘ã‘ãƒ¬ãƒãƒ¼ãƒˆç”»é¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† è¦ªå‘ã‘ãƒ¬ãƒãƒ¼ãƒˆ        ğŸ”’     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ ã€‡ã€‡ã•ã‚“ã®å­¦ç¿’ãƒ¬ãƒãƒ¼ãƒˆ     â”‚
â”‚                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ğŸ“… ä»Šé€±ã®ã‚µãƒãƒªãƒ¼ (12/23-12/29)â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                 â”‚
â”‚  å­¦ç¿’æ—¥æ•°:    6æ—¥ / 7æ—¥ â­      â”‚
â”‚  å­¦ç¿’æ™‚é–“:    2æ™‚é–“15åˆ†         â”‚
â”‚  æ–°è¦å˜èª:    42èª              â”‚
â”‚  å¾©ç¿’å˜èª:    128èª             â”‚
â”‚  å¹³å‡æ­£ç­”ç‡:  85%               â”‚
â”‚                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ğŸ“ˆ æ­£ç­”ç‡ã®æ¨ç§»                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                 â”‚
â”‚  100%â”‚      â•­â”€â•®                â”‚
â”‚   80%â”‚  â•­â”€â”€â•¯  â•°â”€â”€â•®            â”‚
â”‚   60%â”‚â”€â”€â•¯        â•°â”€â”€          â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”‚
â”‚       æœˆ ç« æ°´ æœ¨ é‡‘ åœŸ æ—¥      â”‚
â”‚                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  âš ï¸ è‹¦æ‰‹ãªå˜èª TOP 5            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  1. necessary (å¿…è¦ãª) - 3å›é–“é•ã„â”‚
â”‚  2. different (ç•°ãªã‚‹) - 2å›é–“é•ã„â”‚
â”‚  ...                            â”‚
â”‚                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  âš™ï¸ é€šçŸ¥è¨­å®š                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â–¡ æ¯æ—¥ã®å­¦ç¿’å®Œäº†ã‚’é€šçŸ¥         â”‚
â”‚  â–¡ 3æ—¥ä»¥ä¸Šä¼‘ã‚€ã¨é€šçŸ¥            â”‚
â”‚  â–¡ é€±é–“ãƒ¬ãƒãƒ¼ãƒˆã‚’é€šçŸ¥           â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2.11 éŸ³å£°èªè­˜æ¨©é™ãƒªã‚¯ã‚¨ã‚¹ãƒˆç”»é¢ï¼ˆæ–°è¦è¿½åŠ ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 â”‚
â”‚           ğŸ¤                    â”‚
â”‚                                 â”‚
â”‚    å£°ã§ç­”ãˆã‚‹ã«ã¯               â”‚
â”‚    ãƒã‚¤ã‚¯ã®è¨±å¯ãŒå¿…è¦ã§ã™       â”‚
â”‚                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                 â”‚
â”‚  è‹±å˜èªã®ç™ºéŸ³ã‚’èãå–ã£ã¦       â”‚
â”‚  æ­£è§£ã‹ã©ã†ã‹åˆ¤å®šã—ã¾ã™ã€‚       â”‚
â”‚                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   ğŸ¤ ãƒã‚¤ã‚¯ã‚’è¨±å¯ã™ã‚‹    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   å¾Œã§è¨­å®šã™ã‚‹           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  â€» è¨­å®šã‚¢ãƒ—ãƒªã‹ã‚‰ã„ã¤ã§ã‚‚      â”‚
â”‚    å¤‰æ›´ã§ãã¾ã™                 â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«è¨­è¨ˆ

### 4.1 ERå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Deck     â”‚â”€â”€â”€â”€â”€â”€<â”‚    Card     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  1:N  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id          â”‚       â”‚ id          â”‚
â”‚ name        â”‚       â”‚ deckId      â”‚
â”‚ description â”‚       â”‚ japanese    â”‚
â”‚ iconName    â”‚       â”‚ english     â”‚
â”‚ categoryId  â”‚       â”‚ phonetic    â”‚
â”‚ isBuiltIn   â”‚       â”‚ example     â”‚
â”‚ sortOrder   â”‚       â”‚ exampleJp   â”‚
â”‚ createdAt   â”‚       â”‚ audioURL    â”‚
â”‚ updatedAt   â”‚       â”‚ imageURL    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ easeFactor  â”‚
                      â”‚ interval    â”‚
                      â”‚ repetitions â”‚
                      â”‚ nextReview  â”‚
                      â”‚ lapses      â”‚
                      â”‚ status      â”‚
                      â”‚ createdAt   â”‚
                      â”‚ updatedAt   â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ 1:N
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ StudySessionâ”‚â”€â”€â”€â”€â”€â”€<â”‚ReviewHistoryâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  1:N  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id          â”‚       â”‚ id          â”‚
â”‚ startedAt   â”‚       â”‚ cardId      â”‚
â”‚ completedAt â”‚       â”‚ sessionId   â”‚
â”‚ sessionType â”‚       â”‚ reviewedAt  â”‚
â”‚ cardsStudiedâ”‚       â”‚ quality     â”‚
â”‚ correctCountâ”‚       â”‚ responseTimeâ”‚
â”‚ duration    â”‚       â”‚ answerMethodâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UserSettingsâ”‚       â”‚ Achievement â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id          â”‚       â”‚ id          â”‚
â”‚ dailyGoal   â”‚       â”‚ type        â”‚
â”‚ parentPIN   â”‚       â”‚ name        â”‚
â”‚ notifyTime  â”‚       â”‚ description â”‚
â”‚ soundEnabledâ”‚       â”‚ iconName    â”‚
â”‚ hapticOn    â”‚       â”‚ unlockedAt  â”‚
â”‚ theme       â”‚       â”‚ progress    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DailyStats  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id          â”‚
â”‚ date        â”‚
â”‚ newCards    â”‚
â”‚ reviewCards â”‚
â”‚ correctCountâ”‚
â”‚ studyTime   â”‚
â”‚ streakDay   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 SwiftDataãƒ¢ãƒ‡ãƒ«å®šç¾©

```swift
// MARK: - Deckï¼ˆãƒ‡ãƒƒã‚­/å˜èªå¸³ï¼‰
@Model
final class Deck {
    @Attribute(.unique) var id: UUID
    var name: String
    var deckDescription: String
    var iconName: String
    var categoryId: String          // æ‹¡å¼µå¯èƒ½ãªã‚«ãƒ†ã‚´ãƒªID
    var isBuiltIn: Bool             // ã‚·ã‚¹ãƒ†ãƒ æä¾›ã®ãƒ‡ãƒƒã‚­ã‹
    var isActive: Bool              // å­¦ç¿’å¯¾è±¡ã¨ã—ã¦æœ‰åŠ¹ã‹
    var sortOrder: Int
    var createdAt: Date
    var updatedAt: Date

    @Relationship(deleteRule: .cascade, inverse: \Card.deck)
    var cards: [Card]

    init(name: String, categoryId: String = "custom") {
        self.id = UUID()
        self.name = name
        self.deckDescription = ""
        self.iconName = "rectangle.stack"
        self.categoryId = categoryId
        self.isBuiltIn = false
        self.isActive = true
        self.sortOrder = 0
        self.createdAt = Date()
        self.updatedAt = Date()
        self.cards = []
    }

    // ã‚«ãƒ†ã‚´ãƒªè¡¨ç¤ºåã‚’å–å¾—
    var categoryDisplayName: String {
        DeckCategoryManager.displayName(for: categoryId)
    }
}

// MARK: - DeckCategoryManagerï¼ˆã‚«ãƒ†ã‚´ãƒªç®¡ç†ï¼‰
struct DeckCategoryManager {
    // ã‚·ã‚¹ãƒ†ãƒ å®šç¾©ã®ã‚«ãƒ†ã‚´ãƒª
    static let systemCategories: [(id: String, name: String, icon: String)] = [
        ("new_horizon_1", "New Horizon 1å¹´", "ğŸ“˜"),
        ("new_horizon_2", "New Horizon 2å¹´", "ğŸ“˜"),
        ("new_horizon_3", "New Horizon 3å¹´", "ğŸ“˜"),
        ("sunshine_1", "Sunshine 1å¹´", "ğŸ“—"),
        ("sunshine_2", "Sunshine 2å¹´", "ğŸ“—"),
        ("sunshine_3", "Sunshine 3å¹´", "ğŸ“—"),
        ("blue_sky_1", "Blue Sky 1å¹´", "ğŸ“•"),
        ("blue_sky_2", "Blue Sky 2å¹´", "ğŸ“•"),
        ("blue_sky_3", "Blue Sky 3å¹´", "ğŸ“•"),
        ("eiken_5", "è‹±æ¤œ5ç´š", "ğŸ…"),
        ("eiken_4", "è‹±æ¤œ4ç´š", "ğŸ…"),
        ("eiken_3", "è‹±æ¤œ3ç´š", "ğŸ…"),
        ("eiken_pre2", "è‹±æ¤œæº–2ç´š", "ğŸ…"),
        ("custom", "ã‚«ã‚¹ã‚¿ãƒ ", "ğŸ“"),
    ]

    static func displayName(for categoryId: String) -> String {
        systemCategories.first { $0.id == categoryId }?.name ?? categoryId
    }

    static func icon(for categoryId: String) -> String {
        systemCategories.first { $0.id == categoryId }?.icon ?? "ğŸ“"
    }

    static func isSystemCategory(_ categoryId: String) -> Bool {
        categoryId != "custom"
    }
}

// MARK: - Cardï¼ˆå˜èªã‚«ãƒ¼ãƒ‰ï¼‰
@Model
final class Card {
    @Attribute(.unique) var id: UUID
    var japanese: String          // æ—¥æœ¬èªï¼ˆæ„å‘³ï¼‰
    var english: String           // è‹±å˜èª
    var phonetic: String?         // ç™ºéŸ³è¨˜å·
    var example: String?          // ä¾‹æ–‡ï¼ˆè‹±èªï¼‰
    var exampleJapanese: String?  // ä¾‹æ–‡ï¼ˆæ—¥æœ¬èªï¼‰
    var audioURL: String?         // ç™ºéŸ³éŸ³å£°URL
    var imageURL: String?         // ã‚¤ãƒ¡ãƒ¼ã‚¸ç”»åƒURL

    // SM-2 ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ç”¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
    var easeFactor: Double        // é›£æ˜“åº¦ä¿‚æ•°ï¼ˆåˆæœŸ2.5ã€æœ€å°1.3ï¼‰
    var interval: Int             // æ¬¡å›å¾©ç¿’ã¾ã§ã®æ—¥æ•°
    var repetitions: Int          // é€£ç¶šæ­£è§£å›æ•°
    var nextReviewDate: Date      // æ¬¡å›å¾©ç¿’æ—¥
    var lapses: Int               // å¿˜ã‚ŒãŸå›æ•°ï¼ˆãƒªã‚»ãƒƒãƒˆå›æ•°ï¼‰

    // å­¦ç¿’ã‚¹ãƒ†ãƒƒãƒ—ç®¡ç†ï¼ˆæ–°è¦å­¦ç¿’ç”¨ï¼‰
    var learningStep: Int         // å­¦ç¿’ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆ0: æœªå­¦ç¿’, 1: 3åˆ†å¾Œ, 2: 20åˆ†å¾Œ, -1: å’æ¥­æ¸ˆã¿ï¼‰
    var learningDueDate: Date?    // å­¦ç¿’ä¸­ã®æ¬¡å›è¡¨ç¤ºæ™‚åˆ»

    var status: CardStatus        // å­¦ç¿’çŠ¶æ…‹
    var createdAt: Date
    var updatedAt: Date

    var deck: Deck?

    @Relationship(deleteRule: .cascade, inverse: \ReviewHistory.card)
    var reviewHistories: [ReviewHistory]

    init(japanese: String, english: String, deck: Deck? = nil) {
        self.id = UUID()
        self.japanese = japanese
        self.english = english
        self.easeFactor = 2.5
        self.interval = 0
        self.repetitions = 0
        self.nextReviewDate = Date()
        self.lapses = 0
        self.learningStep = 0
        self.status = .new
        self.createdAt = Date()
        self.updatedAt = Date()
        self.deck = deck
        self.reviewHistories = []
    }
}

enum CardStatus: String, Codable {
    case new        // æœªå­¦ç¿’
    case learning   // å­¦ç¿’ä¸­ï¼ˆå½“æ—¥ã®ã‚¹ãƒ†ãƒƒãƒ—å­¦ç¿’ä¸­ï¼‰
    case review     // å¾©ç¿’å¾…ã¡ï¼ˆå’æ¥­æ¸ˆã¿ã€æ¬¡å›å¾©ç¿’æ—¥å¾…ã¡ï¼‰
    case relearning // å†å­¦ç¿’ä¸­ï¼ˆå¾©ç¿’ã§é–“é•ãˆãŸï¼‰
    case mastered   // ç¿’å¾—æ¸ˆã¿ï¼ˆinterval >= 21æ—¥ï¼‰
}

// MARK: - ReviewHistoryï¼ˆå¾©ç¿’å±¥æ­´ï¼‰
@Model
final class ReviewHistory {
    @Attribute(.unique) var id: UUID
    var reviewedAt: Date
    var quality: Int              // å›ç­”å“è³ªï¼ˆ0-5ï¼‰
    var responseTimeMs: Int?      // å›ç­”æ™‚é–“ï¼ˆãƒŸãƒªç§’ï¼‰
    var answerMethod: AnswerMethod // å›ç­”æ–¹æ³•

    var card: Card?
    var session: StudySession?    // ã©ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§å¾©ç¿’ã—ãŸã‹

    init(quality: Int, answerMethod: AnswerMethod) {
        self.id = UUID()
        self.reviewedAt = Date()
        self.quality = quality
        self.answerMethod = answerMethod
    }
}

enum AnswerMethod: String, Codable {
    case selfReport   // è‡ªå·±ç”³å‘Šï¼ˆé ­ã§è€ƒãˆã¦ï¼‰
    case typing       // ã‚¿ã‚¤ãƒ”ãƒ³ã‚°å…¥åŠ›
    case voice        // éŸ³å£°èªè­˜
}

// MARK: - StudySessionï¼ˆå­¦ç¿’ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰
@Model
final class StudySession {
    @Attribute(.unique) var id: UUID
    var startedAt: Date
    var completedAt: Date?
    var sessionType: SessionType
    var cardsStudied: Int
    var correctCount: Int
    var durationSeconds: Int

    @Relationship(deleteRule: .cascade, inverse: \ReviewHistory.session)
    var reviewHistories: [ReviewHistory]

    init(sessionType: SessionType) {
        self.id = UUID()
        self.startedAt = Date()
        self.sessionType = sessionType
        self.cardsStudied = 0
        self.correctCount = 0
        self.durationSeconds = 0
        self.reviewHistories = []
    }
}

enum SessionType: String, Codable {
    case newLearning    // æ–°è¦å­¦ç¿’
    case review         // å¾©ç¿’ã®ã¿
    case mixed          // ãŠã¾ã‹ã›ï¼ˆæ–°è¦+å¾©ç¿’ï¼‰
}

// MARK: - DailyStatsï¼ˆæ—¥æ¬¡çµ±è¨ˆï¼‰
@Model
final class DailyStats {
    @Attribute(.unique) var id: UUID
    @Attribute(.unique) var date: Date  // æ—¥ä»˜ï¼ˆæ™‚åˆ»ã¯00:00:00ï¼‰
    var newCardsCount: Int        // æ–°è¦å­¦ç¿’ã‚«ãƒ¼ãƒ‰æ•°
    var reviewCardsCount: Int     // å¾©ç¿’ã‚«ãƒ¼ãƒ‰æ•°
    var correctCount: Int         // æ­£è§£æ•°
    var totalCount: Int           // ç·å›ç­”æ•°
    var studyTimeSeconds: Int     // å­¦ç¿’æ™‚é–“ï¼ˆç§’ï¼‰
    var currentStreak: Int        // ãã®æ—¥æ™‚ç‚¹ã®é€£ç¶šæ—¥æ•°

    init(date: Date) {
        self.id = UUID()
        self.date = Calendar.current.startOfDay(for: date)
        self.newCardsCount = 0
        self.reviewCardsCount = 0
        self.correctCount = 0
        self.totalCount = 0
        self.studyTimeSeconds = 0
        self.currentStreak = 0
    }

    var accuracy: Double {
        guard totalCount > 0 else { return 0 }
        return Double(correctCount) / Double(totalCount)
    }
}

// MARK: - UserSettingsï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šï¼‰
@Model
final class UserSettings {
    @Attribute(.unique) var id: UUID
    var dailyNewCardGoal: Int     // 1æ—¥ã®æ–°è¦ã‚«ãƒ¼ãƒ‰ç›®æ¨™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ10ï¼‰
    var dailyReviewLimit: Int     // 1æ—¥ã®å¾©ç¿’ä¸Šé™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ50ï¼‰
    var notificationTime: Date?   // é€šçŸ¥æ™‚åˆ»
    var soundEnabled: Bool
    var hapticEnabled: Bool
    var preferredAnswerMethod: AnswerMethod
    var isPremium: Bool           // åºƒå‘Šå‰Šé™¤æ¸ˆã¿ã‹
    var userName: String?         // ãƒ¦ãƒ¼ã‚¶ãƒ¼åï¼ˆãƒ¬ãƒãƒ¼ãƒˆè¡¨ç¤ºç”¨ï¼‰
    var selectedTextbook: String? // é¸æŠä¸­ã®æ•™ç§‘æ›¸
    var selectedGrade: Int?       // é¸æŠä¸­ã®å­¦å¹´

    // å­¦ç¿’ã‚¹ãƒ†ãƒƒãƒ—è¨­å®šï¼ˆåˆ†å˜ä½ï¼‰
    var learningSteps: [Int]      // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: [3, 20] = 3åˆ†å¾Œã€20åˆ†å¾Œ
    var relearningSteps: [Int]    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: [20] = 20åˆ†å¾Œ
    var graduatingInterval: Int   // å’æ¥­æ™‚ã®åˆå›é–“éš”ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1æ—¥ï¼‰
    var easyInterval: Int         // ã€Œç°¡å˜ã€æ™‚ã®åˆå›é–“éš”ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 4æ—¥ï¼‰

    init() {
        self.id = UUID()
        self.dailyNewCardGoal = 10
        self.dailyReviewLimit = 50
        self.soundEnabled = true
        self.hapticEnabled = true
        self.preferredAnswerMethod = .selfReport
        self.isPremium = false
        self.learningSteps = [3, 20]
        self.relearningSteps = [20]
        self.graduatingInterval = 1
        self.easyInterval = 4
    }
}

// MARK: - Achievementï¼ˆå®Ÿç¸¾/ãƒãƒƒã‚¸ï¼‰
@Model
final class Achievement {
    @Attribute(.unique) var id: UUID
    var typeId: String            // å®Ÿç¸¾ã‚¿ã‚¤ãƒ—ID
    var unlockedAt: Date?
    var progress: Int             // é€²æ—ï¼ˆï¼…ã¾ãŸã¯æ•°å€¤ï¼‰

    init(typeId: String) {
        self.id = UUID()
        self.typeId = typeId
        self.progress = 0
    }
}

// å®Ÿç¸¾ã‚¿ã‚¤ãƒ—å®šç¾©
struct AchievementType {
    let id: String
    let displayName: String
    let description: String
    let iconName: String
    let targetValue: Int

    static let allTypes: [AchievementType] = [
        AchievementType(id: "first_card", displayName: "ã¯ã˜ã‚ã®ä¸€æ­©", description: "æœ€åˆã®1èªã‚’å­¦ç¿’", iconName: "star.fill", targetValue: 1),
        AchievementType(id: "ten_cards", displayName: "10èªãƒã‚¹ã‚¿ãƒ¼", description: "10èªã‚’ç¿’å¾—", iconName: "10.circle.fill", targetValue: 10),
        AchievementType(id: "fifty_cards", displayName: "50èªãƒã‚¹ã‚¿ãƒ¼", description: "50èªã‚’ç¿’å¾—", iconName: "50.circle.fill", targetValue: 50),
        AchievementType(id: "hundred_cards", displayName: "100èªãƒã‚¹ã‚¿ãƒ¼", description: "100èªã‚’ç¿’å¾—", iconName: "100.circle.fill", targetValue: 100),
        AchievementType(id: "streak_3", displayName: "3æ—¥é€£ç¶š", description: "3æ—¥é€£ç¶šã§å­¦ç¿’", iconName: "flame.fill", targetValue: 3),
        AchievementType(id: "streak_7", displayName: "1é€±é–“ç¶™ç¶š", description: "7æ—¥é€£ç¶šã§å­¦ç¿’", iconName: "flame.fill", targetValue: 7),
        AchievementType(id: "streak_30", displayName: "1ãƒ¶æœˆç¶™ç¶š", description: "30æ—¥é€£ç¶šã§å­¦ç¿’", iconName: "flame.fill", targetValue: 30),
        AchievementType(id: "perfect_day", displayName: "ãƒ‘ãƒ¼ãƒ•ã‚§ã‚¯ãƒˆãƒ‡ã‚¤", description: "1æ—¥å…¨å•æ­£è§£", iconName: "crown.fill", targetValue: 1),
        AchievementType(id: "speedster", displayName: "ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚¹ã‚¿ãƒ¼", description: "10å•é€£ç¶šã§3ç§’ä»¥å†…ã«æ­£è§£", iconName: "bolt.fill", targetValue: 10),
    ]

    static func find(by id: String) -> AchievementType? {
        allTypes.first { $0.id == id }
    }
}
```

---

## 5. SM-2ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ å®Ÿè£…ï¼ˆæ”¹è‰¯ç‰ˆï¼‰

### 5.1 ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ æ¦‚è¦

SM-2ï¼ˆSuperMemo 2ï¼‰ã‚’ãƒ™ãƒ¼ã‚¹ã«ã€Ankiã®å­¦ç¿’ã‚¹ãƒ†ãƒƒãƒ—ã‚·ã‚¹ãƒ†ãƒ ã‚’å–ã‚Šå…¥ã‚ŒãŸæ”¹è‰¯ç‰ˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã€‚

### 5.2 å­¦ç¿’ãƒ•ã‚§ãƒ¼ã‚º

```
ã€æ–°è¦ã‚«ãƒ¼ãƒ‰ã€‘
  â†“
[å­¦ç¿’ä¸­ (Learning)]
  Step 1: 3åˆ†å¾Œã«å†è¡¨ç¤º
  Step 2: 20åˆ†å¾Œã«å†è¡¨ç¤º
  â†“ (æ­£è§£ã§å’æ¥­)
[å¾©ç¿’ (Review)]
  1æ—¥å¾Œ â†’ 3æ—¥å¾Œ â†’ 7æ—¥å¾Œ â†’ 14æ—¥å¾Œ â†’ ...
  â†“ (é–“é•ãˆãŸã‚‰)
[å†å­¦ç¿’ (Relearning)]
  20åˆ†å¾Œã«å†è¡¨ç¤º â†’ 1æ—¥å¾Œã«å¾©ç¿’
  â†“
[å¾©ç¿’ (Review)]
```

### 5.3 3æ®µéšè©•ä¾¡ã¨ãƒãƒƒãƒ”ãƒ³ã‚°

| ãƒœã‚¿ãƒ³ | è¡¨ç¤º | å†…éƒ¨quality | æ¬¡å›å¾©ç¿’ |
|--------|------|-------------|---------|
| å…¨ç„¶ãƒ€ãƒ¡ | ğŸ˜° | 0 | å­¦ç¿’ã‚¹ãƒ†ãƒƒãƒ—ã«ãƒªã‚»ãƒƒãƒˆ |
| å°‘ã—è€ƒãˆãŸ | ğŸ¤” | 2 | ç¾åœ¨ã®é–“éš” Ã— 1.2 |
| å®Œç’§ï¼ | ğŸ˜Š | 4 | ç¾åœ¨ã®é–“éš” Ã— EF |

### 5.4 ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

- **EF (Ease Factor)**: é›£æ˜“åº¦ä¿‚æ•°ï¼ˆ1.3ã€œ3.0ã€åˆæœŸå€¤2.5ï¼‰
- **Interval**: æ¬¡å›å¾©ç¿’ã¾ã§ã®æ—¥æ•°
- **Lapses**: å¿˜ã‚ŒãŸï¼ˆãƒªã‚»ãƒƒãƒˆã—ãŸï¼‰å›æ•°

### 5.5 Swiftå®Ÿè£…

```swift
// MARK: - SM2Algorithm.swift

import Foundation

/// SM-2ãƒ™ãƒ¼ã‚¹ã®é–“éš”åå¾©ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼ˆAnkié¢¨ã®å­¦ç¿’ã‚¹ãƒ†ãƒƒãƒ—ä»˜ãï¼‰
struct SM2Algorithm {

    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š
    static let defaultLearningSteps: [Int] = [3, 20]  // åˆ†å˜ä½
    static let defaultRelearningSteps: [Int] = [20]   // åˆ†å˜ä½
    static let defaultGraduatingInterval: Int = 1     // æ—¥
    static let defaultEasyInterval: Int = 4           // æ—¥

    /// 3æ®µéšè©•ä¾¡
    enum SimpleRating: Int {
        case again = 0    // å…¨ç„¶ãƒ€ãƒ¡ ğŸ˜°
        case hard = 2     // å°‘ã—è€ƒãˆãŸ ğŸ¤”
        case easy = 4     // å®Œç’§ï¼ ğŸ˜Š

        var displayEmoji: String {
            switch self {
            case .again: return "ğŸ˜°"
            case .hard: return "ğŸ¤”"
            case .easy: return "ğŸ˜Š"
            }
        }

        var displayText: String {
            switch self {
            case .again: return "å…¨ç„¶ãƒ€ãƒ¡"
            case .hard: return "å°‘ã—è€ƒãˆãŸ"
            case .easy: return "å®Œç’§ï¼"
            }
        }
    }

    /// è¨ˆç®—çµæœ
    struct ScheduleResult {
        let easeFactor: Double
        let interval: Int
        let repetitions: Int
        let nextReviewDate: Date
        let lapses: Int
        let learningStep: Int
        let learningDueDate: Date?
        let newStatus: CardStatus
    }

    /// æ¬¡å›å¾©ç¿’ã¾ã§ã®è¡¨ç¤ºãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—
    static func nextReviewText(for card: Card, rating: SimpleRating, settings: UserSettings? = nil) -> String {
        let learningSteps = settings?.learningSteps ?? defaultLearningSteps
        let graduatingInterval = settings?.graduatingInterval ?? defaultGraduatingInterval
        let easyInterval = settings?.easyInterval ?? defaultEasyInterval

        switch card.status {
        case .new, .learning:
            switch rating {
            case .again:
                return "\(learningSteps[0])åˆ†å¾Œ"
            case .hard:
                if card.learningStep < learningSteps.count - 1 {
                    return "\(learningSteps[card.learningStep + 1])åˆ†å¾Œ"
                } else {
                    return "\(graduatingInterval)æ—¥å¾Œ"
                }
            case .easy:
                return "\(easyInterval)æ—¥å¾Œ"
            }

        case .review, .relearning, .mastered:
            switch rating {
            case .again:
                return "20åˆ†å¾Œ"
            case .hard:
                let newInterval = max(1, Int(Double(card.interval) * 1.2))
                return "\(newInterval)æ—¥å¾Œ"
            case .easy:
                let newInterval = max(1, Int(Double(card.interval) * card.easeFactor))
                return "\(newInterval)æ—¥å¾Œ"
            }
        }
    }

    /// ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«è¨ˆç®—ï¼ˆãƒ¡ã‚¤ãƒ³é–¢æ•°ï¼‰
    static func calculate(
        card: Card,
        rating: SimpleRating,
        settings: UserSettings? = nil
    ) -> ScheduleResult {
        let learningSteps = settings?.learningSteps ?? defaultLearningSteps
        let graduatingInterval = settings?.graduatingInterval ?? defaultGraduatingInterval
        let easyInterval = settings?.easyInterval ?? defaultEasyInterval

        switch card.status {
        case .new, .learning:
            return calculateForLearning(
                card: card,
                rating: rating,
                learningSteps: learningSteps,
                graduatingInterval: graduatingInterval,
                easyInterval: easyInterval
            )

        case .review, .mastered:
            return calculateForReview(
                card: card,
                rating: rating,
                learningSteps: learningSteps
            )

        case .relearning:
            return calculateForRelearning(
                card: card,
                rating: rating
            )
        }
    }

    // MARK: - Private Methods

    /// æ–°è¦ãƒ»å­¦ç¿’ä¸­ã‚«ãƒ¼ãƒ‰ã®è¨ˆç®—
    private static func calculateForLearning(
        card: Card,
        rating: SimpleRating,
        learningSteps: [Int],
        graduatingInterval: Int,
        easyInterval: Int
    ) -> ScheduleResult {
        var easeFactor = card.easeFactor
        var learningStep = card.learningStep
        var interval = card.interval
        var repetitions = card.repetitions
        var lapses = card.lapses
        var newStatus: CardStatus = .learning
        var learningDueDate: Date? = nil
        var nextReviewDate = card.nextReviewDate

        switch rating {
        case .again:
            // æœ€åˆã®ã‚¹ãƒ†ãƒƒãƒ—ã«æˆ»ã‚‹
            learningStep = 0
            learningDueDate = Calendar.current.date(
                byAdding: .minute,
                value: learningSteps[0],
                to: Date()
            )
            newStatus = .learning

        case .hard:
            // æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¸é€²ã‚€
            learningStep += 1
            if learningStep >= learningSteps.count {
                // å’æ¥­
                interval = graduatingInterval
                nextReviewDate = Calendar.current.date(
                    byAdding: .day,
                    value: interval,
                    to: Date()
                ) ?? Date()
                learningStep = -1  // å’æ¥­æ¸ˆã¿ãƒãƒ¼ã‚¯
                newStatus = .review
                repetitions = 1
            } else {
                learningDueDate = Calendar.current.date(
                    byAdding: .minute,
                    value: learningSteps[learningStep],
                    to: Date()
                )
                newStatus = .learning
            }

        case .easy:
            // å³å’æ¥­ï¼ˆEasyãƒœãƒ¼ãƒŠã‚¹ï¼‰
            interval = easyInterval
            nextReviewDate = Calendar.current.date(
                byAdding: .day,
                value: interval,
                to: Date()
            ) ?? Date()
            learningStep = -1
            newStatus = .review
            repetitions = 1
            // EFã‚’å°‘ã—ä¸Šã’ã‚‹
            easeFactor = min(3.0, easeFactor + 0.15)
        }

        return ScheduleResult(
            easeFactor: easeFactor,
            interval: interval,
            repetitions: repetitions,
            nextReviewDate: nextReviewDate,
            lapses: lapses,
            learningStep: learningStep,
            learningDueDate: learningDueDate,
            newStatus: newStatus
        )
    }

    /// å¾©ç¿’ã‚«ãƒ¼ãƒ‰ã®è¨ˆç®—
    private static func calculateForReview(
        card: Card,
        rating: SimpleRating,
        learningSteps: [Int]
    ) -> ScheduleResult {
        var easeFactor = card.easeFactor
        var interval = card.interval
        var repetitions = card.repetitions
        var lapses = card.lapses
        var newStatus: CardStatus = .review
        var learningDueDate: Date? = nil
        var nextReviewDate = card.nextReviewDate

        switch rating {
        case .again:
            // å†å­¦ç¿’ã¸
            lapses += 1
            repetitions = 0
            // EFã‚’ä¸‹ã’ã‚‹
            easeFactor = max(1.3, easeFactor - 0.2)
            // 20åˆ†å¾Œã«å†è¡¨ç¤º
            learningDueDate = Calendar.current.date(
                byAdding: .minute,
                value: 20,
                to: Date()
            )
            newStatus = .relearning
            // é–“éš”ã‚’çŸ­ç¸®ï¼ˆç¾åœ¨ã®20%ï¼‰
            interval = max(1, Int(Double(interval) * 0.2))

        case .hard:
            // é–“éš”ã‚’å°‘ã—å»¶ã°ã™ï¼ˆÃ—1.2ï¼‰
            interval = max(1, Int(Double(interval) * 1.2))
            nextReviewDate = Calendar.current.date(
                byAdding: .day,
                value: interval,
                to: Date()
            ) ?? Date()
            // EFã‚’å°‘ã—ä¸‹ã’ã‚‹
            easeFactor = max(1.3, easeFactor - 0.15)
            repetitions += 1
            newStatus = interval >= 21 ? .mastered : .review

        case .easy:
            // é–“éš”ã‚’å¤§ããå»¶ã°ã™ï¼ˆÃ—EFï¼‰
            interval = max(1, Int(Double(interval) * easeFactor))
            nextReviewDate = Calendar.current.date(
                byAdding: .day,
                value: interval,
                to: Date()
            ) ?? Date()
            // EFã‚’ä¸Šã’ã‚‹
            easeFactor = min(3.0, easeFactor + 0.1)
            repetitions += 1
            newStatus = interval >= 21 ? .mastered : .review
        }

        return ScheduleResult(
            easeFactor: easeFactor,
            interval: interval,
            repetitions: repetitions,
            nextReviewDate: nextReviewDate,
            lapses: lapses,
            learningStep: -1,
            learningDueDate: learningDueDate,
            newStatus: newStatus
        )
    }

    /// å†å­¦ç¿’ã‚«ãƒ¼ãƒ‰ã®è¨ˆç®—
    private static func calculateForRelearning(
        card: Card,
        rating: SimpleRating
    ) -> ScheduleResult {
        var easeFactor = card.easeFactor
        var interval = card.interval
        var repetitions = card.repetitions
        var lapses = card.lapses
        var newStatus: CardStatus = .relearning
        var learningDueDate: Date? = nil
        var nextReviewDate = card.nextReviewDate

        switch rating {
        case .again:
            // å†åº¦20åˆ†å¾Œ
            learningDueDate = Calendar.current.date(
                byAdding: .minute,
                value: 20,
                to: Date()
            )
            newStatus = .relearning

        case .hard, .easy:
            // å†å­¦ç¿’å®Œäº† â†’ å¾©ç¿’ã¸
            // é–“éš”ã¯çŸ­ç¸®ã•ã‚ŒãŸçŠ¶æ…‹ã®ã¾ã¾ï¼ˆæœ€ä½1æ—¥ï¼‰
            interval = max(1, interval)
            nextReviewDate = Calendar.current.date(
                byAdding: .day,
                value: interval,
                to: Date()
            ) ?? Date()
            newStatus = .review
            repetitions = 1

            if rating == .easy {
                easeFactor = min(3.0, easeFactor + 0.1)
            }
        }

        return ScheduleResult(
            easeFactor: easeFactor,
            interval: interval,
            repetitions: repetitions,
            nextReviewDate: nextReviewDate,
            lapses: lapses,
            learningStep: -1,
            learningDueDate: learningDueDate,
            newStatus: newStatus
        )
    }

    /// ã‚«ãƒ¼ãƒ‰ã«çµæœã‚’é©ç”¨
    static func apply(result: ScheduleResult, to card: Card) {
        card.easeFactor = result.easeFactor
        card.interval = result.interval
        card.repetitions = result.repetitions
        card.nextReviewDate = result.nextReviewDate
        card.lapses = result.lapses
        card.learningStep = result.learningStep
        card.learningDueDate = result.learningDueDate
        card.status = result.newStatus
        card.updatedAt = Date()
    }
}
```

---

## 5.9 å›ç­”æ–¹æ³•åˆ¥ã®è‡ªå‹•è©•ä¾¡

### 5.9.1 æ¦‚è¦

å›ç­”æ–¹æ³•ã«ã‚ˆã£ã¦ã€è‡ªå‹•è©•ä¾¡ã®ãƒ­ã‚¸ãƒƒã‚¯ãŒç•°ãªã‚Šã¾ã™ï¼š

| å›ç­”æ–¹æ³• | è©•ä¾¡æ–¹æ³• | Easy | Hard | Again |
|---------|---------|------|------|-------|
| **ğŸ’­ é ­ã§è€ƒãˆã¦** | æ‰‹å‹•é¸æŠ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠ |
| **âŒ¨ï¸ å…¥åŠ›ã—ã¦** | å›ç­”æ™‚é–“ã§è‡ªå‹•åˆ¤å®š | < 3ç§’ | â‰¥ 3ç§’ | ä¸æ­£è§£ |
| **ğŸ¤ å£°ã§** | æ­£èª¤ã®ã¿ã§è‡ªå‹•åˆ¤å®š | æ­£è§£ | - | ä¸æ­£è§£ |

### 5.9.2 ã‚¿ã‚¤ãƒ”ãƒ³ã‚°å…¥åŠ›ã®æ™‚é–“åˆ¤å®šï¼ˆ2026-01-03å®Ÿè£…ï¼‰

**ç§‘å­¦çš„æ ¹æ‹ **: Desirable Difficultyç†è«–ï¼ˆBjork & Bjork, 2011ï¼‰ã«åŸºã¥ã

**è©•ä¾¡åŸºæº–:**
```swift
let responseTime = Date().timeIntervalSince(startTime)

if isCorrect {
    if responseTime < 3.0 {
        rating = .easy    // ğŸ˜Š å®Œç’§ï¼ â†’ 4æ—¥å¾Œï¼ˆå³å’æ¥­ï¼‰
    } else {
        rating = .hard    // ğŸ¤” å°‘ã—è€ƒãˆãŸ â†’ 20åˆ†å¾Œï¼ˆã‚¹ãƒ†ãƒƒãƒ—2ã¸ï¼‰
    }
} else {
    rating = .again       // ğŸ˜° å…¨ç„¶ãƒ€ãƒ¡ â†’ 3åˆ†å¾Œ
}
```

**åŠ¹æœ:**
- âœ… æƒ³èµ·ã®åŠªåŠ›åº¦ãŒå­¦ç¿’ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã«åæ˜ ã•ã‚Œã‚‹
- âœ… å³ç­”ã§ããŸå˜èªï¼ˆ< 3ç§’ï¼‰: å®Œå…¨å®šç€ã¨åˆ¤æ–­ â†’ 4æ—¥å¾Œ
- âœ… å°‘ã—è€ƒãˆãŸå˜èªï¼ˆâ‰¥ 3ç§’ï¼‰: å®šç€ä¸ååˆ†ã¨åˆ¤æ–­ â†’ 20åˆ†å¾Œã«å†ç¢ºèª

**å­¦ç¿’ãƒ•ãƒ­ãƒ¼ã®ä¾‹:**

```
æ–°è¦ã‚«ãƒ¼ãƒ‰ã€Œappleã€
â””â”€ ã‚¿ã‚¤ãƒ”ãƒ³ã‚°: 1.5ç§’ã§æ­£è§£
   â””â”€ Easyè©•ä¾¡ â†’ å³å’æ¥­ â†’ 4æ—¥å¾Œã«å¾©ç¿’

æ–°è¦ã‚«ãƒ¼ãƒ‰ã€Œbeautifulã€
â””â”€ ã‚¿ã‚¤ãƒ”ãƒ³ã‚°: 7ç§’ã§æ­£è§£
   â””â”€ Hardè©•ä¾¡ â†’ å­¦ç¿’ã‚¹ãƒ†ãƒƒãƒ—2ã¸
      â””â”€ 20åˆ†å¾Œ: 2ç§’ã§æ­£è§£
         â””â”€ Easyè©•ä¾¡ â†’ å’æ¥­ â†’ 1æ—¥å¾Œã«å¾©ç¿’
```

### 5.9.3 éŸ³å£°èªè­˜ã®è©•ä¾¡

éŸ³å£°èªè­˜ã¯å³ç­”æ€§ã‚’é‡è¦–ã™ã‚‹ãŸã‚ã€æ™‚é–“åˆ¤å®šã¯è¡Œã‚ãªã„ï¼š

```swift
if isCorrect {
    rating = .easy    // ğŸ˜Š å®Œç’§ï¼ â†’ 4æ—¥å¾Œï¼ˆå³å’æ¥­ï¼‰
} else {
    rating = .again   // ğŸ˜° å…¨ç„¶ãƒ€ãƒ¡ â†’ 3åˆ†å¾Œ
}
```

**ç†ç”±:**
- éŸ³å£°èªè­˜å‡¦ç†æ™‚é–“ãŒä¸ç¢ºå®šï¼ˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é…å»¶ç­‰ï¼‰
- ç™ºè©±é€Ÿåº¦ã¯å€‹äººå·®ãŒå¤§ãã„
- ã€Œæ°—è»½ã«å£°ã§ç­”ãˆã‚‹ã€ã¨ã„ã†åˆ©ç‚¹ã‚’æãªã‚ãªã„

### 5.9.4 å®Ÿè£…è©³ç´°

**TestView.swift:**
```swift
// ã‚¿ã‚¤ãƒ”ãƒ³ã‚°é–‹å§‹æ™‚åˆ»ã‚’è¨˜éŒ²
@State private var typingStartTime: Date?

// ã‚«ãƒ¼ãƒ‰è¡¨ç¤ºæ™‚ãƒ»æ¬¡ã®ã‚«ãƒ¼ãƒ‰ã¸ç§»å‹•æ™‚ã«åˆæœŸåŒ–
typingStartTime = Date()

// TypingInputView.checkAnswer()ã§å›ç­”æ™‚é–“ã‚’è¨ˆç®—
let responseTime = Date().timeIntervalSince(startTime)
onResult(.correct(responseTime: responseTime))

// handleTypingResult()ã§è©•ä¾¡åˆ¤å®š
switch result {
case .correct(let time):
    rating = time < 3.0 ? .easy : .hard
case .incorrect:
    rating = .again
}
```

---

## 6. éŸ³å£°èªè­˜å®Ÿè£…

### 6.1 Speech Frameworkä½¿ç”¨

```swift
import Speech
import AVFoundation

@MainActor
class SpeechRecognizer: ObservableObject {
    @Published var transcript: String = ""
    @Published var isRecording: Bool = false
    @Published var errorMessage: String?
    @Published var authorizationStatus: SFSpeechRecognizerAuthorizationStatus = .notDetermined

    private var audioEngine: AVAudioEngine?
    private var recognitionRequest: SFSpeechAudioBufferRecognitionRequest?
    private var recognitionTask: SFSpeechRecognitionTask?
    private let speechRecognizer = SFSpeechRecognizer(locale: Locale(identifier: "en-US"))

    init() {
        checkAuthorizationStatus()
    }

    func checkAuthorizationStatus() {
        authorizationStatus = SFSpeechRecognizer.authorizationStatus()
    }

    func requestAuthorization() async -> Bool {
        await withCheckedContinuation { continuation in
            SFSpeechRecognizer.requestAuthorization { status in
                Task { @MainActor in
                    self.authorizationStatus = status
                    continuation.resume(returning: status == .authorized)
                }
            }
        }
    }

    func startRecording() throws {
        // æ¨©é™ãƒã‚§ãƒƒã‚¯
        guard authorizationStatus == .authorized else {
            errorMessage = "éŸ³å£°èªè­˜ãŒè¨±å¯ã•ã‚Œã¦ã„ã¾ã›ã‚“"
            return
        }

        // æ—¢å­˜ã®ã‚¿ã‚¹ã‚¯ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«
        recognitionTask?.cancel()
        recognitionTask = nil

        // ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚»ãƒƒã‚·ãƒ§ãƒ³è¨­å®š
        let audioSession = AVAudioSession.sharedInstance()
        try audioSession.setCategory(.record, mode: .measurement, options: .duckOthers)
        try audioSession.setActive(true, options: .notifyOthersOnDeactivation)

        audioEngine = AVAudioEngine()
        guard let audioEngine = audioEngine else { return }

        let inputNode = audioEngine.inputNode
        recognitionRequest = SFSpeechAudioBufferRecognitionRequest()

        guard let recognitionRequest = recognitionRequest else { return }
        recognitionRequest.shouldReportPartialResults = true

        // ã‚ªãƒ•ãƒ©ã‚¤ãƒ³èªè­˜ã‚’è©¦ã¿ã‚‹ï¼ˆiOS 13+ï¼‰
        if #available(iOS 13, *) {
            recognitionRequest.requiresOnDeviceRecognition = false
        }

        recognitionTask = speechRecognizer?.recognitionTask(with: recognitionRequest) { [weak self] result, error in
            Task { @MainActor in
                if let result = result {
                    self?.transcript = result.bestTranscription.formattedString
                }

                if error != nil || result?.isFinal == true {
                    self?.stopRecording()
                }
            }
        }

        let recordingFormat = inputNode.outputFormat(forBus: 0)
        inputNode.installTap(onBus: 0, bufferSize: 1024, format: recordingFormat) { buffer, _ in
            recognitionRequest.append(buffer)
        }

        audioEngine.prepare()
        try audioEngine.start()

        isRecording = true
        transcript = ""
    }

    func stopRecording() {
        audioEngine?.stop()
        audioEngine?.inputNode.removeTap(onBus: 0)
        recognitionRequest?.endAudio()
        recognitionTask?.cancel()

        isRecording = false
    }

    /// éŸ³å£°èªè­˜çµæœã¨æ­£è§£ã‚’æ¯”è¼ƒ
    func checkAnswer(transcript: String, correctAnswer: String) -> (isCorrect: Bool, similarity: Double) {
        let normalizedTranscript = transcript.lowercased().trimmingCharacters(in: .whitespacesAndNewlines)
        let normalizedAnswer = correctAnswer.lowercased().trimmingCharacters(in: .whitespacesAndNewlines)

        // å®Œå…¨ä¸€è‡´
        if normalizedTranscript == normalizedAnswer {
            return (true, 1.0)
        }

        // ãƒ¬ãƒ¼ãƒ™ãƒ³ã‚·ãƒ¥ã‚¿ã‚¤ãƒ³è·é›¢ã§é¡ä¼¼åº¦åˆ¤å®š
        let distance = levenshteinDistance(normalizedTranscript, normalizedAnswer)
        let maxLength = max(normalizedTranscript.count, normalizedAnswer.count)
        let similarity = maxLength > 0 ? 1.0 - (Double(distance) / Double(maxLength)) : 0

        // 80%ä»¥ä¸Šä¸€è‡´ã§æ­£è§£
        return (similarity >= 0.8, similarity)
    }

    private func levenshteinDistance(_ s1: String, _ s2: String) -> Int {
        let s1Array = Array(s1)
        let s2Array = Array(s2)
        var dist = [[Int]](repeating: [Int](repeating: 0, count: s2Array.count + 1), count: s1Array.count + 1)

        for i in 0...s1Array.count { dist[i][0] = i }
        for j in 0...s2Array.count { dist[0][j] = j }

        for i in 1...s1Array.count {
            for j in 1...s2Array.count {
                if s1Array[i-1] == s2Array[j-1] {
                    dist[i][j] = dist[i-1][j-1]
                } else {
                    dist[i][j] = min(dist[i-1][j] + 1, dist[i][j-1] + 1, dist[i-1][j-1] + 1)
                }
            }
        }

        return dist[s1Array.count][s2Array.count]
    }
}
```

### 6.2 æ¨©é™ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ•ãƒ­ãƒ¼

```swift
// MARK: - SpeechPermissionView.swift

struct SpeechPermissionView: View {
    @StateObject private var speechRecognizer = SpeechRecognizer()
    @Binding var isPresented: Bool
    var onPermissionGranted: () -> Void
    var onSkipped: () -> Void

    var body: some View {
        VStack(spacing: 32) {
            Spacer()

            Image(systemName: "mic.circle.fill")
                .font(.system(size: 80))
                .foregroundColor(.rpPrimary)

            VStack(spacing: 16) {
                Text("å£°ã§ç­”ãˆã‚‹ã«ã¯\nãƒã‚¤ã‚¯ã®è¨±å¯ãŒå¿…è¦ã§ã™")
                    .font(.rpTitle2)
                    .multilineTextAlignment(.center)

                Text("è‹±å˜èªã®ç™ºéŸ³ã‚’èãå–ã£ã¦\næ­£è§£ã‹ã©ã†ã‹åˆ¤å®šã—ã¾ã™ã€‚")
                    .font(.rpBody)
                    .foregroundColor(.rpTextSecondary)
                    .multilineTextAlignment(.center)
            }

            Spacer()

            VStack(spacing: 12) {
                Button {
                    Task {
                        let granted = await speechRecognizer.requestAuthorization()
                        if granted {
                            onPermissionGranted()
                        }
                        isPresented = false
                    }
                } label: {
                    Label("ãƒã‚¤ã‚¯ã‚’è¨±å¯ã™ã‚‹", systemImage: "mic.fill")
                        .frame(maxWidth: .infinity)
                }
                .buttonStyle(RPPrimaryButtonStyle())

                Button {
                    onSkipped()
                    isPresented = false
                } label: {
                    Text("å¾Œã§è¨­å®šã™ã‚‹")
                        .frame(maxWidth: .infinity)
                }
                .buttonStyle(RPSecondaryButtonStyle())
            }
            .padding(.horizontal, 32)

            Text("â€» è¨­å®šã‚¢ãƒ—ãƒªã‹ã‚‰ã„ã¤ã§ã‚‚å¤‰æ›´ã§ãã¾ã™")
                .font(.rpCaption1)
                .foregroundColor(.rpTextSecondary)
                .padding(.bottom, 32)
        }
        .padding()
    }
}
```

---

## 7. æ•™ç§‘æ›¸åˆ¥å˜èªã‚»ãƒƒãƒˆ

### 7.1 ãƒ‡ãƒ¼ã‚¿å½¢å¼ï¼ˆJSONï¼‰

```json
{
  "deckId": "new_horizon_1",
  "name": "New Horizon 1å¹´",
  "categoryId": "new_horizon_1",
  "version": "2024",
  "cards": [
    {
      "japanese": "ã“ã‚“ã«ã¡ã¯",
      "english": "hello",
      "phonetic": "/hÉ™ËˆloÊŠ/",
      "example": "Hello, everyone!",
      "exampleJapanese": "ã¿ãªã•ã‚“ã€ã“ã‚“ã«ã¡ã¯ï¼",
      "unit": 1
    },
    {
      "japanese": "åå‰",
      "english": "name",
      "phonetic": "/neÉªm/",
      "example": "My name is Taro.",
      "exampleJapanese": "ç§ã®åå‰ã¯å¤ªéƒã§ã™ã€‚",
      "unit": 1
    }
  ]
}
```

### 7.2 åˆå›èµ·å‹•æ™‚ã®ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿

```swift
class BuiltInDeckLoader {
    static func loadBuiltInDecks(modelContext: ModelContext) async {
        let deckFiles = [
            "new_horizon_1",
            "new_horizon_2",
            "new_horizon_3",
            "sunshine_1",
            "sunshine_2",
            "sunshine_3"
        ]

        for fileName in deckFiles {
            guard let url = Bundle.main.url(forResource: fileName, withExtension: "json"),
                  let data = try? Data(contentsOf: url),
                  let deckData = try? JSONDecoder().decode(DeckData.self, from: data) else {
                continue
            }

            // æ—¢å­˜ãƒã‚§ãƒƒã‚¯
            let categoryId = deckData.categoryId
            let descriptor = FetchDescriptor<Deck>(
                predicate: #Predicate { $0.isBuiltIn && $0.categoryId == categoryId }
            )
            if let existing = try? modelContext.fetch(descriptor), !existing.isEmpty {
                continue
            }

            // ãƒ‡ãƒƒã‚­ä½œæˆ
            let deck = Deck(name: deckData.name, categoryId: deckData.categoryId)
            deck.isBuiltIn = true
            deck.isActive = false  // åˆæœŸã¯éã‚¢ã‚¯ãƒ†ã‚£ãƒ–
            modelContext.insert(deck)

            // ã‚«ãƒ¼ãƒ‰ä½œæˆ
            for cardData in deckData.cards {
                let card = Card(japanese: cardData.japanese, english: cardData.english, deck: deck)
                card.phonetic = cardData.phonetic
                card.example = cardData.example
                card.exampleJapanese = cardData.exampleJapanese
                modelContext.insert(card)
            }
        }

        try? modelContext.save()
    }
}

// ãƒ‡ãƒ¼ã‚¿æ§‹é€ ä½“
struct DeckData: Codable {
    let deckId: String
    let name: String
    let categoryId: String
    let version: String
    let cards: [CardData]
}

struct CardData: Codable {
    let japanese: String
    let english: String
    let phonetic: String?
    let example: String?
    let exampleJapanese: String?
    let unit: Int?
}
```

---

## 8. CSVã‚¤ãƒ³ãƒãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰

### 8.1 å¯¾å¿œãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè‡ªä½œã®CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã€ã‚ªãƒªã‚¸ãƒŠãƒ«ã®å˜èªå¸³ã‚’ä½œæˆã§ãã‚‹ã€‚

#### åˆ—å®šç¾©

| åˆ—å | å¿…é ˆ | èª¬æ˜ | ä¾‹ |
|------|------|------|-----|
| japanese | âœ… | æ—¥æœ¬èªï¼ˆæ„å‘³ï¼‰ | é‡è¦ãª |
| english | âœ… | è‹±å˜èª | important |
| phonetic | - | ç™ºéŸ³è¨˜å· | /ÉªmËˆpÉ”ËrtÉ™nt/ |
| example | - | ä¾‹æ–‡ï¼ˆè‹±èªï¼‰ | This is important. |
| exampleJapanese | - | ä¾‹æ–‡ï¼ˆæ—¥æœ¬èªè¨³ï¼‰ | ã“ã‚Œã¯é‡è¦ã§ã™ã€‚ |
| pastTense | - | éå»å½¢ï¼ˆä¸è¦å‰‡å‹•è©ç”¨ï¼‰ | ran |
| pastParticiple | - | éå»åˆ†è©ï¼ˆä¸è¦å‰‡å‹•è©ç”¨ï¼‰ | run |
| pastTensePhonetic | - | éå»å½¢ã®ç™ºéŸ³è¨˜å· | /rÃ¦n/ |
| pastParticiplePhonetic | - | éå»åˆ†è©ã®ç™ºéŸ³è¨˜å· | /rÊŒn/ |

#### å¯¾å¿œã™ã‚‹ãƒ˜ãƒƒãƒ€ãƒ¼åï¼ˆæ—¥æœ¬èªå¯¾å¿œï¼‰

| è‹±èªãƒ˜ãƒƒãƒ€ãƒ¼ | æ—¥æœ¬èªãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆä»£æ›¿ï¼‰ |
|-------------|----------------------|
| japanese | æ—¥æœ¬èª, æ„å‘³, å’Œè¨³ |
| english | è‹±èª, å˜èª, word |
| phonetic | ç™ºéŸ³è¨˜å·, ç™ºéŸ³ |
| example | ä¾‹æ–‡, ä¾‹æ–‡ï¼ˆè‹±èªï¼‰ |
| exampleJapanese | ä¾‹æ–‡ï¼ˆæ—¥æœ¬èªï¼‰, ä¾‹æ–‡æ—¥æœ¬èª |
| pastTense | past_tense, éå»å½¢ |
| pastParticiple | past_participle, éå»åˆ†è© |
| pastTensePhonetic | past_tense_phonetic, éå»å½¢ç™ºéŸ³, éå»å½¢ç™ºéŸ³è¨˜å· |
| pastParticiplePhonetic | past_participle_phonetic, éå»åˆ†è©ç™ºéŸ³, éå»åˆ†è©ç™ºéŸ³è¨˜å· |

#### åŸºæœ¬ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆå¿…é ˆ2åˆ—ï¼‰
```csv
japanese,english
é‡è¦ãª,important
ç¾ã—ã„,beautiful
èµ°ã‚‹,run
```

#### æ‹¡å¼µãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³åˆ—ã‚ã‚Šï¼‰
```csv
japanese,english,phonetic,example,exampleJapanese
é‡è¦ãª,important,/ÉªmËˆpÉ”ËrtÉ™nt/,This is important.,ã“ã‚Œã¯é‡è¦ã§ã™ã€‚
ç¾ã—ã„,beautiful,/ËˆbjuËtÉªfÉ™l/,She is beautiful.,å½¼å¥³ã¯ç¾ã—ã„ã€‚
èµ°ã‚‹,run,/rÊŒn/,I run every day.,ç§ã¯æ¯æ—¥èµ°ã‚Šã¾ã™ã€‚
```

#### ä¸è¦å‰‡å‹•è©ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆéå»å½¢ãƒ»éå»åˆ†è©ã‚ã‚Šï¼‰
```csv
japanese,english,phonetic,pastTense,pastParticiple,pastTensePhonetic,pastParticiplePhonetic
èµ°ã‚‹,run,/rÊŒn/,ran,run,/rÃ¦n/,/rÊŒn/
è¡Œã,go,/É¡oÊŠ/,went,gone,/went/,/É¡É”Ën/
é£Ÿã¹ã‚‹,eat,/iËt/,ate,eaten,/eÉªt/,/ËˆiËtÉ™n/
ã™ã‚‹,do,/duË/,did,done,/dÉªd/,/dÊŒn/
è¦‹ã‚‹,see,/siË/,saw,seen,/sÉ”Ë/,/siËn/
```

#### æ—¥æœ¬èªãƒ˜ãƒƒãƒ€ãƒ¼ä¾‹
```csv
æ—¥æœ¬èª,è‹±èª,ç™ºéŸ³è¨˜å·,éå»å½¢,éå»åˆ†è©
èµ°ã‚‹,run,/rÊŒn/,ran,run
```

### 8.2 æ©Ÿèƒ½ä»•æ§˜

- **ãƒ˜ãƒƒãƒ€ãƒ¼è‡ªå‹•èªè­˜**: 1è¡Œç›®ã®ãƒ˜ãƒƒãƒ€ãƒ¼ã‹ã‚‰åˆ—ã‚’è‡ªå‹•ãƒãƒƒãƒ”ãƒ³ã‚°
- **ãƒ˜ãƒƒãƒ€ãƒ¼ãªã—ãƒ¢ãƒ¼ãƒ‰**: è¨­å®šã§åˆ‡ã‚Šæ›¿ãˆå¯èƒ½ï¼ˆåˆ—é †: japanese,english,phonetic,example,exampleJapaneseï¼‰
- **é‡è¤‡ã‚¹ã‚­ãƒƒãƒ—**: åŒã˜ japanese + english ã®çµ„ã¿åˆã‚ã›ã¯è‡ªå‹•ã‚¹ã‚­ãƒƒãƒ—
- **å¼•ç”¨ç¬¦å¯¾å¿œ**: ã‚«ãƒ³ãƒã‚’å«ã‚€å€¤ã¯ `"å€¤"` ã§å›²ã‚€ã“ã¨ã§å¯¾å¿œ
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: è¡Œã”ã¨ã®ã‚¨ãƒ©ãƒ¼ã‚’åé›†ã—ã€çµæœç”»é¢ã§ä»¶æ•°è¡¨ç¤º

### 8.3 Swiftå®Ÿè£…ï¼ˆå‚è€ƒï¼‰

```swift
import UniformTypeIdentifiers

// MARK: - CSVParser
struct CSVParser {

    struct ParseResult {
        let validCards: [CardData]
        let skippedCount: Int
        let errorMessages: [String]
    }

    struct CardData {
        let english: String
        let japanese: String
        let phonetic: String?
        let example: String?
        let exampleJapanese: String?
    }

    /// CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‘ãƒ¼ã‚¹
    static func parse(csvString: String, existingWords: Set<String> = []) -> ParseResult {
        var validCards: [CardData] = []
        var skippedCount = 0
        var errorMessages: [String] = []
        var seenWords: Set<String> = existingWords

        let lines = csvString.components(separatedBy: .newlines)
            .map { $0.trimmingCharacters(in: .whitespaces) }
            .filter { !$0.isEmpty }

        // ãƒ˜ãƒƒãƒ€ãƒ¼è¡Œã‚’ã‚¹ã‚­ãƒƒãƒ—
        let startIndex = isHeaderRow(lines.first) ? 1 : 0

        for (index, line) in lines.enumerated() where index >= startIndex {
            let columns = parseCSVLine(line)

            // æœ€ä½2åˆ—å¿…è¦
            guard columns.count >= 2 else {
                errorMessages.append("è¡Œ\(index + 1): åˆ—æ•°ä¸è¶³")
                continue
            }

            let english = columns[0].trimmingCharacters(in: .whitespaces)
            let japanese = columns[1].trimmingCharacters(in: .whitespaces)

            // ç©ºãƒã‚§ãƒƒã‚¯
            guard !english.isEmpty, !japanese.isEmpty else {
                errorMessages.append("è¡Œ\(index + 1): ç©ºã®å€¤")
                continue
            }

            // é‡è¤‡ãƒã‚§ãƒƒã‚¯
            let normalizedEnglish = english.lowercased()
            if seenWords.contains(normalizedEnglish) {
                skippedCount += 1
                continue
            }
            seenWords.insert(normalizedEnglish)

            // ã‚ªãƒ—ã‚·ãƒ§ãƒ³åˆ—
            let phonetic = columns.count > 2 ? columns[2].nilIfEmpty : nil
            let example = columns.count > 3 ? columns[3].nilIfEmpty : nil
            let exampleJapanese = columns.count > 4 ? columns[4].nilIfEmpty : nil

            validCards.append(CardData(
                english: english,
                japanese: japanese,
                phonetic: phonetic,
                example: example,
                exampleJapanese: exampleJapanese
            ))
        }

        return ParseResult(
            validCards: validCards,
            skippedCount: skippedCount,
            errorMessages: errorMessages
        )
    }

    /// CSVè¡Œã‚’ãƒ‘ãƒ¼ã‚¹ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã€ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆå¯¾å¿œï¼‰
    private static func parseCSVLine(_ line: String) -> [String] {
        var result: [String] = []
        var current = ""
        var inQuotes = false

        for char in line {
            if char == "\"" {
                inQuotes.toggle()
            } else if char == "," && !inQuotes {
                result.append(current)
                current = ""
            } else {
                current.append(char)
            }
        }
        result.append(current)

        return result
    }

    /// ãƒ˜ãƒƒãƒ€ãƒ¼è¡Œã‹ã©ã†ã‹åˆ¤å®š
    private static func isHeaderRow(_ line: String?) -> Bool {
        guard let line = line?.lowercased() else { return false }
        let headerKeywords = ["è‹±å˜èª", "english", "japanese", "æ—¥æœ¬èª", "word", "meaning"]
        return headerKeywords.contains { line.contains($0) }
    }
}

extension String {
    var nilIfEmpty: String? {
        isEmpty ? nil : self
    }
}
```

---

## 9. è¦ªå‘ã‘ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½

### 9.1 PINèªè¨¼ï¼ˆKeychainä½¿ç”¨ï¼‰

```swift
// MARK: - SecureStorage.swift

import Security

class SecureStorage {
    static let shared = SecureStorage()

    private let serviceName = "biz.mojosoft.repitan"

    func savePIN(_ pin: String) -> Bool {
        guard let data = pin.data(using: .utf8) else { return false }

        let query: [String: Any] = [
            kSecClass as String: kSecClassGenericPassword,
            kSecAttrService as String: serviceName,
            kSecAttrAccount as String: "parentPIN",
            kSecValueData as String: data
        ]

        // æ—¢å­˜ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’å‰Šé™¤
        SecItemDelete(query as CFDictionary)

        // æ–°ã—ã„ã‚¢ã‚¤ãƒ†ãƒ ã‚’è¿½åŠ 
        let status = SecItemAdd(query as CFDictionary, nil)
        return status == errSecSuccess
    }

    func getPIN() -> String? {
        let query: [String: Any] = [
            kSecClass as String: kSecClassGenericPassword,
            kSecAttrService as String: serviceName,
            kSecAttrAccount as String: "parentPIN",
            kSecReturnData as String: true
        ]

        var result: AnyObject?
        let status = SecItemCopyMatching(query as CFDictionary, &result)

        guard status == errSecSuccess,
              let data = result as? Data,
              let pin = String(data: data, encoding: .utf8) else {
            return nil
        }

        return pin
    }

    func deletePIN() {
        let query: [String: Any] = [
            kSecClass as String: kSecClassGenericPassword,
            kSecAttrService as String: serviceName,
            kSecAttrAccount as String: "parentPIN"
        ]

        SecItemDelete(query as CFDictionary)
    }

    var hasPIN: Bool {
        getPIN() != nil
    }
}
```

### 9.2 é€±é–“ãƒ¬ãƒãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿

```swift
struct WeeklyReport {
    let weekStartDate: Date
    let weekEndDate: Date
    let studyDays: Int
    let totalStudyTimeMinutes: Int
    let newCardsLearned: Int
    let cardsReviewed: Int
    let averageAccuracy: Double
    let currentStreak: Int
    let weakCards: [Card]  // è‹¦æ‰‹ãªå˜èªTOP5
    let dailyStats: [DailyStats]

    static func generate(from stats: [DailyStats], cards: [Card]) -> WeeklyReport {
        let calendar = Calendar.current
        let today = calendar.startOfDay(for: Date())
        let weekStart = calendar.date(byAdding: .day, value: -6, to: today)!

        let weekStats = stats.filter { stat in
            stat.date >= weekStart && stat.date <= today
        }

        let studyDays = weekStats.filter { $0.newCardsCount > 0 || $0.reviewCardsCount > 0 }.count
        let totalStudyTime = weekStats.reduce(0) { $0 + $1.studyTimeSeconds } / 60
        let newCards = weekStats.reduce(0) { $0 + $1.newCardsCount }
        let reviewCards = weekStats.reduce(0) { $0 + $1.reviewCardsCount }
        let totalCorrect = weekStats.reduce(0) { $0 + $1.correctCount }
        let totalAnswers = weekStats.reduce(0) { $0 + $1.totalCount }
        let accuracy = totalAnswers > 0 ? Double(totalCorrect) / Double(totalAnswers) : 0

        // è‹¦æ‰‹ãªå˜èªï¼ˆlapsesé †ï¼‰
        let weakCards = cards
            .filter { $0.lapses > 0 }
            .sorted { $0.lapses > $1.lapses }
            .prefix(5)

        return WeeklyReport(
            weekStartDate: weekStart,
            weekEndDate: today,
            studyDays: studyDays,
            totalStudyTimeMinutes: totalStudyTime,
            newCardsLearned: newCards,
            cardsReviewed: reviewCards,
            averageAccuracy: accuracy,
            currentStreak: weekStats.last?.currentStreak ?? 0,
            weakCards: Array(weakCards),
            dailyStats: weekStats
        )
    }
}
```

### 9.3 é€šçŸ¥æ©Ÿèƒ½

```swift
import UserNotifications

class NotificationManager {
    static let shared = NotificationManager()

    func requestPermission() async -> Bool {
        let center = UNUserNotificationCenter.current()
        do {
            return try await center.requestAuthorization(options: [.alert, .sound, .badge])
        } catch {
            return false
        }
    }

    /// å­¦ç¿’ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼é€šçŸ¥ã‚’ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
    func scheduleDailyReminder(at time: DateComponents) {
        let content = UNMutableNotificationContent()
        content.title = "ãƒªãƒ”ãŸã‚“"
        content.body = "ä»Šæ—¥ã®è‹±å˜èªå­¦ç¿’ã®æ™‚é–“ã§ã™ï¼ğŸ”¥"
        content.sound = .default

        let trigger = UNCalendarNotificationTrigger(dateMatching: time, repeats: true)
        let request = UNNotificationRequest(
            identifier: "daily_reminder",
            content: content,
            trigger: trigger
        )

        UNUserNotificationCenter.current().add(request)
    }

    /// è¦ªå‘ã‘ï¼šå­¦ç¿’å®Œäº†é€šçŸ¥
    func notifyParentStudyCompleted(cardsStudied: Int, accuracy: Double) {
        let content = UNMutableNotificationContent()
        content.title = "å­¦ç¿’å®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ"
        content.body = "ä»Šæ—¥ã¯\(cardsStudied)èªå­¦ç¿’ã—ã¾ã—ãŸã€‚æ­£ç­”ç‡: \(Int(accuracy * 100))%"
        content.sound = .default

        let request = UNNotificationRequest(
            identifier: UUID().uuidString,
            content: content,
            trigger: nil
        )

        UNUserNotificationCenter.current().add(request)
    }

    /// è¦ªå‘ã‘ï¼š3æ—¥ä»¥ä¸Šä¼‘ã¿è­¦å‘Š
    func notifyParentInactivity(daysMissed: Int) {
        let content = UNMutableNotificationContent()
        content.title = "å­¦ç¿’ãŒæ­¢ã¾ã£ã¦ã„ã¾ã™"
        content.body = "\(daysMissed)æ—¥é–“å­¦ç¿’ã—ã¦ã„ã¾ã›ã‚“ã€‚å£°ã‚’ã‹ã‘ã¦ã¿ã¾ã—ã‚‡ã†ã€‚"
        content.sound = .default

        let request = UNNotificationRequest(
            identifier: "inactivity_warning",
            content: content,
            trigger: nil
        )

        UNUserNotificationCenter.current().add(request)
    }

    /// é€šçŸ¥ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«
    func cancelDailyReminder() {
        UNUserNotificationCenter.current().removePendingNotificationRequests(withIdentifiers: ["daily_reminder"])
    }
}
```

---

## 10. èª²é‡‘æ©Ÿèƒ½ï¼ˆStoreKit 2ï¼‰

### 10.1 ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆè¨­è¨ˆ

| Product ID | ã‚¿ã‚¤ãƒ— | ä¾¡æ ¼ | èª¬æ˜ |
|------------|--------|------|------|
| `biz.mojosoft.repitan.removeads` | Non-Consumable | Â¥480 | åºƒå‘Šå‰Šé™¤ï¼ˆè²·ã„åˆ‡ã‚Šï¼‰ |

### 10.2 å®Ÿè£…

```swift
import StoreKit

@MainActor
class PurchaseManager: ObservableObject {
    static let shared = PurchaseManager()

    @Published var isPremium: Bool = false
    @Published var products: [Product] = []
    @Published var purchaseError: String?

    private let productIds = ["biz.mojosoft.repitan.removeads"]
    private var updateListenerTask: Task<Void, Never>?

    init() {
        updateListenerTask = listenForTransactions()

        Task {
            await loadProducts()
            await updatePurchasedProducts()
        }
    }

    deinit {
        updateListenerTask?.cancel()
    }

    func loadProducts() async {
        do {
            products = try await Product.products(for: productIds)
        } catch {
            print("Failed to load products: \(error)")
        }
    }

    func purchase(_ product: Product) async throws {
        let result = try await product.purchase()

        switch result {
        case .success(let verification):
            let transaction = try checkVerified(verification)
            await updatePurchasedProducts()
            await transaction.finish()
        case .userCancelled:
            throw PurchaseError.userCancelled
        case .pending:
            throw PurchaseError.pending
        @unknown default:
            throw PurchaseError.unknown
        }
    }

    func updatePurchasedProducts() async {
        for await result in Transaction.currentEntitlements {
            if case .verified(let transaction) = result {
                if transaction.productID == "biz.mojosoft.repitan.removeads" {
                    isPremium = true
                    return
                }
            }
        }
        isPremium = false
    }

    func restorePurchases() async throws {
        try await AppStore.sync()
        await updatePurchasedProducts()
    }

    private func listenForTransactions() -> Task<Void, Never> {
        Task.detached {
            for await result in Transaction.updates {
                if case .verified(let transaction) = result {
                    await self.updatePurchasedProducts()
                    await transaction.finish()
                }
            }
        }
    }

    private func checkVerified<T>(_ result: VerificationResult<T>) throws -> T {
        switch result {
        case .unverified:
            throw PurchaseError.failedVerification
        case .verified(let safe):
            return safe
        }
    }
}

enum PurchaseError: LocalizedError {
    case failedVerification
    case userCancelled
    case pending
    case unknown

    var errorDescription: String? {
        switch self {
        case .failedVerification:
            return "è³¼å…¥ã®æ¤œè¨¼ã«å¤±æ•—ã—ã¾ã—ãŸ"
        case .userCancelled:
            return "è³¼å…¥ãŒã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã¾ã—ãŸ"
        case .pending:
            return "è³¼å…¥ãŒä¿ç•™ä¸­ã§ã™"
        case .unknown:
            return "ä¸æ˜ãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ"
        }
    }
}
```

---

## 11. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
Repitan/
â”œâ”€â”€ Repitan.xcodeproj/
â”œâ”€â”€ Repitan/
â”‚   â”œâ”€â”€ App/
â”‚   â”‚   â”œâ”€â”€ RepitanApp.swift
â”‚   â”‚   â””â”€â”€ ContentView.swift
â”‚   â”‚
â”‚   â”œâ”€â”€ Models/
â”‚   â”‚   â”œâ”€â”€ Deck.swift
â”‚   â”‚   â”œâ”€â”€ Card.swift
â”‚   â”‚   â”œâ”€â”€ ReviewHistory.swift
â”‚   â”‚   â”œâ”€â”€ StudySession.swift
â”‚   â”‚   â”œâ”€â”€ DailyStats.swift
â”‚   â”‚   â”œâ”€â”€ UserSettings.swift
â”‚   â”‚   â”œâ”€â”€ Achievement.swift
â”‚   â”‚   â””â”€â”€ DeckCategoryManager.swift
â”‚   â”‚
â”‚   â”œâ”€â”€ Views/
â”‚   â”‚   â”œâ”€â”€ Home/
â”‚   â”‚   â”‚   â”œâ”€â”€ HomeView.swift
â”‚   â”‚   â”‚   â”œâ”€â”€ DashboardCard.swift
â”‚   â”‚   â”‚   â””â”€â”€ StreakBadge.swift
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Study/
â”‚   â”‚   â”‚   â”œâ”€â”€ StudySessionView.swift
â”‚   â”‚   â”‚   â”œâ”€â”€ NewLearningView.swift
â”‚   â”‚   â”‚   â”œâ”€â”€ TestView.swift
â”‚   â”‚   â”‚   â”œâ”€â”€ AnswerResultView.swift
â”‚   â”‚   â”‚   â”œâ”€â”€ RatingButtonsView.swift
â”‚   â”‚   â”‚   â””â”€â”€ SessionCompleteView.swift
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Cards/
â”‚   â”‚   â”‚   â”œâ”€â”€ DeckListView.swift
â”‚   â”‚   â”‚   â”œâ”€â”€ DeckCreateView.swift
â”‚   â”‚   â”‚   â”œâ”€â”€ CardListView.swift
â”‚   â”‚   â”‚   â”œâ”€â”€ CardEditView.swift
â”‚   â”‚   â”‚   â””â”€â”€ CSVImportView.swift
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Settings/
â”‚   â”‚   â”‚   â”œâ”€â”€ SettingsView.swift
â”‚   â”‚   â”‚   â”œâ”€â”€ PurchaseView.swift
â”‚   â”‚   â”‚   â””â”€â”€ AboutView.swift
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Parent/
â”‚   â”‚   â”‚   â”œâ”€â”€ ParentReportView.swift
â”‚   â”‚   â”‚   â”œâ”€â”€ PINEntryView.swift
â”‚   â”‚   â”‚   â”œâ”€â”€ PINSetupView.swift
â”‚   â”‚   â”‚   â””â”€â”€ WeeklyReportView.swift
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Onboarding/
â”‚   â”‚   â”‚   â”œâ”€â”€ OnboardingView.swift
â”‚   â”‚   â”‚   â””â”€â”€ SpeechPermissionView.swift
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ Components/
â”‚   â”‚       â”œâ”€â”€ CardView.swift
â”‚   â”‚       â”œâ”€â”€ ProgressRing.swift
â”‚   â”‚       â”œâ”€â”€ FlipCardView.swift
â”‚   â”‚       â”œâ”€â”€ AnswerFeedbackView.swift
â”‚   â”‚       â””â”€â”€ SpeakButton.swift
â”‚   â”‚
â”‚   â”œâ”€â”€ ViewModels/
â”‚   â”‚   â”œâ”€â”€ StudyViewModel.swift
â”‚   â”‚   â”œâ”€â”€ DeckViewModel.swift
â”‚   â”‚   â”œâ”€â”€ StatsViewModel.swift
â”‚   â”‚   â””â”€â”€ ParentReportViewModel.swift
â”‚   â”‚
â”‚   â”œâ”€â”€ Services/
â”‚   â”‚   â”œâ”€â”€ SM2Algorithm.swift
â”‚   â”‚   â”œâ”€â”€ SpeechRecognizer.swift
â”‚   â”‚   â”œâ”€â”€ TTSManager.swift
â”‚   â”‚   â”œâ”€â”€ NotificationManager.swift
â”‚   â”‚   â”œâ”€â”€ PurchaseManager.swift
â”‚   â”‚   â”œâ”€â”€ SecureStorage.swift
â”‚   â”‚   â”œâ”€â”€ BuiltInDeckLoader.swift
â”‚   â”‚   â”œâ”€â”€ CSVParser.swift
â”‚   â”‚   â”œâ”€â”€ StreakCalculator.swift
â”‚   â”‚   â””â”€â”€ DailyStatsManager.swift
â”‚   â”‚
â”‚   â”œâ”€â”€ Resources/
â”‚   â”‚   â”œâ”€â”€ Assets.xcassets/
â”‚   â”‚   â”œâ”€â”€ Localizable.xcstrings
â”‚   â”‚   â””â”€â”€ BuiltInDecks/
â”‚   â”‚       â”œâ”€â”€ new_horizon_1.json
â”‚   â”‚       â”œâ”€â”€ new_horizon_2.json
â”‚   â”‚       â”œâ”€â”€ new_horizon_3.json
â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚
â”‚   â””â”€â”€ Extensions/
â”‚       â”œâ”€â”€ Date+Extensions.swift
â”‚       â”œâ”€â”€ Color+Extensions.swift
â”‚       â”œâ”€â”€ Font+Extensions.swift
â”‚       â””â”€â”€ View+Extensions.swift
â”‚
â”œâ”€â”€ RepitanTests/
â”‚   â”œâ”€â”€ SM2AlgorithmTests.swift
â”‚   â”œâ”€â”€ CSVParserTests.swift
â”‚   â”œâ”€â”€ StreakCalculatorTests.swift
â”‚   â””â”€â”€ SpeechRecognizerTests.swift
â”‚
â””â”€â”€ RepitanUITests/
    â””â”€â”€ StudyFlowUITests.swift
```

---

## 12. DailyStatsç®¡ç†

### 12.1 DailyStatsManager

```swift
// MARK: - DailyStatsManager.swift

import SwiftData
import Foundation

class DailyStatsManager {
    private let modelContext: ModelContext

    init(modelContext: ModelContext) {
        self.modelContext = modelContext
    }

    /// ä»Šæ—¥ã®DailyStatsã‚’å–å¾—ï¼ˆãªã‘ã‚Œã°ä½œæˆï¼‰
    func getOrCreateTodayStats() -> DailyStats {
        let today = Calendar.current.startOfDay(for: Date())

        let descriptor = FetchDescriptor<DailyStats>(
            predicate: #Predicate { $0.date == today }
        )

        if let existing = try? modelContext.fetch(descriptor).first {
            return existing
        }

        // æ–°è¦ä½œæˆ
        let stats = DailyStats(date: today)
        stats.currentStreak = calculateCurrentStreak()
        modelContext.insert(stats)
        try? modelContext.save()

        return stats
    }

    /// å­¦ç¿’è¨˜éŒ²ã‚’è¿½åŠ 
    func recordStudy(isNewCard: Bool, isCorrect: Bool, studyTimeSeconds: Int) {
        let stats = getOrCreateTodayStats()

        if isNewCard {
            stats.newCardsCount += 1
        } else {
            stats.reviewCardsCount += 1
        }

        stats.totalCount += 1
        if isCorrect {
            stats.correctCount += 1
        }

        stats.studyTimeSeconds += studyTimeSeconds
        stats.currentStreak = calculateCurrentStreak()

        try? modelContext.save()
    }

    /// ç¾åœ¨ã®ã‚¹ãƒˆãƒªãƒ¼ã‚¯ã‚’è¨ˆç®—
    func calculateCurrentStreak() -> Int {
        StreakCalculator.calculate(modelContext: modelContext)
    }

    /// æœ€æ–°ã®ã‚¹ãƒˆãƒªãƒ¼ã‚¯ã‚’å–å¾—
    func getCurrentStreak() -> Int {
        let today = Calendar.current.startOfDay(for: Date())
        let descriptor = FetchDescriptor<DailyStats>(
            predicate: #Predicate { $0.date == today }
        )

        if let todayStats = try? modelContext.fetch(descriptor).first {
            return todayStats.currentStreak
        }

        return calculateCurrentStreak()
    }
}
```

---

## 13. ã‚¹ãƒˆãƒªãƒ¼ã‚¯è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯

### 13.1 å®Ÿè£…

```swift
// MARK: - StreakCalculator.swift

import Foundation
import SwiftData

struct StreakCalculator {
    /// é€£ç¶šå­¦ç¿’æ—¥æ•°ã‚’è¨ˆç®—
    static func calculate(modelContext: ModelContext) -> Int {
        let calendar = Calendar.current
        let today = calendar.startOfDay(for: Date())

        // éå»90æ—¥åˆ†ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
        let ninetyDaysAgo = calendar.date(byAdding: .day, value: -90, to: today)!

        var descriptor = FetchDescriptor<DailyStats>(
            predicate: #Predicate { stats in
                stats.date >= ninetyDaysAgo
            },
            sortBy: [SortDescriptor(\.date, order: .reverse)]
        )

        guard let stats = try? modelContext.fetch(descriptor) else { return 0 }

        // å­¦ç¿’ã—ãŸæ—¥ã®ã¿ãƒ•ã‚£ãƒ«ã‚¿
        let studyDates = stats
            .filter { $0.newCardsCount > 0 || $0.reviewCardsCount > 0 }
            .map { calendar.startOfDay(for: $0.date) }

        guard !studyDates.isEmpty else { return 0 }

        let latestDate = studyDates[0]

        // ä»Šæ—¥ã‹æ˜¨æ—¥ã§ãªã‘ã‚Œã°ã‚¹ãƒˆãƒªãƒ¼ã‚¯ã¯0
        let daysDiff = calendar.dateComponents([.day], from: latestDate, to: today).day ?? 0
        if daysDiff > 1 {
            return 0
        }

        // é€£ç¶šæ—¥æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆ
        var streak = 0
        var expectedDate = daysDiff == 0 ? today : calendar.date(byAdding: .day, value: -1, to: today)!

        for studyDate in studyDates {
            if studyDate == expectedDate {
                streak += 1
                expectedDate = calendar.date(byAdding: .day, value: -1, to: expectedDate)!
            } else if studyDate < expectedDate {
                break
            }
        }

        return streak
    }

    /// ã‚¹ãƒˆãƒªãƒ¼ã‚¯ã‚’ç¶­æŒã™ã‚‹ãŸã‚ã®æ®‹ã‚Šæ™‚é–“ã‚’è¨ˆç®—
    /// - Returns: æ®‹ã‚Šæ™‚é–“ï¼ˆç§’ï¼‰ã€nil = ä»Šæ—¥ã™ã§ã«å­¦ç¿’æ¸ˆã¿ã¾ãŸã¯ã‚¹ãƒˆãƒªãƒ¼ã‚¯ãªã—
    static func timeRemainingToMaintainStreak(modelContext: ModelContext) -> TimeInterval? {
        let calendar = Calendar.current
        let today = calendar.startOfDay(for: Date())

        let descriptor = FetchDescriptor<DailyStats>(
            predicate: #Predicate { $0.date == today }
        )

        if let todayStats = try? modelContext.fetch(descriptor).first,
           todayStats.newCardsCount > 0 || todayStats.reviewCardsCount > 0 {
            // ä»Šæ—¥ã™ã§ã«å­¦ç¿’æ¸ˆã¿
            return nil
        }

        // æ˜æ—¥ã®0æ™‚ã¾ã§ã®æ™‚é–“
        guard let tomorrow = calendar.date(byAdding: .day, value: 1, to: today) else {
            return nil
        }

        return tomorrow.timeIntervalSince(Date())
    }
}
```

---

## 14. ç™ºéŸ³å†ç”Ÿæ©Ÿèƒ½ï¼ˆText-to-Speechï¼‰

### 14.1 å®Ÿè£…

```swift
// MARK: - TTSManager.swift

import AVFoundation

@MainActor
class TTSManager: ObservableObject {
    static let shared = TTSManager()

    private let synthesizer = AVSpeechSynthesizer()
    @Published var isSpeaking = false

    private init() {
        setupAudioSession()
    }

    private func setupAudioSession() {
        do {
            try AVAudioSession.sharedInstance().setCategory(.playback, mode: .default, options: [.duckOthers])
            try AVAudioSession.sharedInstance().setActive(true)
        } catch {
            print("Audio session setup failed: \(error)")
        }
    }

    /// è‹±å˜èªã‚’ç™ºéŸ³
    func speak(_ text: String, rate: Float = 0.45) {
        // æ—¢ã«å†ç”Ÿä¸­ãªã‚‰åœæ­¢
        if synthesizer.isSpeaking {
            synthesizer.stopSpeaking(at: .immediate)
        }

        let utterance = AVSpeechUtterance(string: text)
        utterance.voice = AVSpeechSynthesisVoice(language: "en-US")
        utterance.rate = rate
        utterance.pitchMultiplier = 1.0
        utterance.volume = 1.0

        isSpeaking = true
        synthesizer.speak(utterance)

        // å®Œäº†æ¤œçŸ¥ï¼ˆç°¡æ˜“å®Ÿè£…ï¼‰
        let estimatedDuration = Double(text.count) * 0.08 + 0.5
        DispatchQueue.main.asyncAfter(deadline: .now() + estimatedDuration) { [weak self] in
            self?.isSpeaking = false
        }
    }

    /// ã‚†ã£ãã‚Šç™ºéŸ³ï¼ˆå­¦ç¿’ç”¨ï¼‰
    func speakSlowly(_ text: String) {
        speak(text, rate: 0.35)
    }

    /// åœæ­¢
    func stop() {
        synthesizer.stopSpeaking(at: .immediate)
        isSpeaking = false
    }
}
```

---

## 15. ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 

### 15.1 ã‚«ãƒ©ãƒ¼å®šç¾©

```swift
// MARK: - Color+Extensions.swift

import SwiftUI

extension Color {
    // ãƒ—ãƒ©ã‚¤ãƒãƒªã‚«ãƒ©ãƒ¼ï¼ˆrp = Repitanï¼‰
    static let rpPrimary = Color("Primary")           // #4A90D9 - ãƒ¡ã‚¤ãƒ³ãƒ–ãƒ«ãƒ¼
    static let rpSecondary = Color("Secondary")       // #7B68EE - ã‚¢ã‚¯ã‚»ãƒ³ãƒˆãƒ‘ãƒ¼ãƒ—ãƒ«

    // ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ã‚«ãƒ©ãƒ¼
    static let rpSuccess = Color("Success")           // #4CAF50 - æ­£è§£ã€æˆåŠŸ
    static let rpWarning = Color("Warning")           // #FF9800 - è­¦å‘Šã€æ³¨æ„
    static let rpError = Color("Error")               // #F44336 - ã‚¨ãƒ©ãƒ¼ã€ä¸æ­£è§£
    static let rpStreak = Color("Streak")             // #FF5722 - ã‚¹ãƒˆãƒªãƒ¼ã‚¯ç‚

    // è©•ä¾¡ãƒœã‚¿ãƒ³ã‚«ãƒ©ãƒ¼
    static let rpAgain = Color("Again")               // #E57373 - å…¨ç„¶ãƒ€ãƒ¡
    static let rpHard = Color("Hard")                 // #FFB74D - å°‘ã—è€ƒãˆãŸ
    static let rpEasy = Color("Easy")                 // #81C784 - å®Œç’§

    // èƒŒæ™¯ã‚«ãƒ©ãƒ¼
    static let rpBackground = Color("Background")     // ãƒ©ã‚¤ãƒˆ: #F5F5F5, ãƒ€ãƒ¼ã‚¯: #1C1C1E
    static let rpCardBackground = Color("CardBg")     // ãƒ©ã‚¤ãƒˆ: #FFFFFF, ãƒ€ãƒ¼ã‚¯: #2C2C2E
    static let rpGroupedBackground = Color("GroupedBg") // ãƒ©ã‚¤ãƒˆ: #EFEFF4, ãƒ€ãƒ¼ã‚¯: #000000

    // ãƒ†ã‚­ã‚¹ãƒˆã‚«ãƒ©ãƒ¼
    static let rpTextPrimary = Color("TextPrimary")   // ãƒ©ã‚¤ãƒˆ: #1C1C1E, ãƒ€ãƒ¼ã‚¯: #FFFFFF
    static let rpTextSecondary = Color("TextSecondary") // ãƒ©ã‚¤ãƒˆ: #8E8E93, ãƒ€ãƒ¼ã‚¯: #8E8E93
}
```

### 15.2 ã‚¿ã‚¤ãƒã‚°ãƒ©ãƒ•ã‚£

```swift
// MARK: - Font+Extensions.swift

import SwiftUI

extension Font {
    // è¦‹å‡ºã—
    static let rpLargeTitle = Font.system(size: 34, weight: .bold)
    static let rpTitle1 = Font.system(size: 28, weight: .bold)
    static let rpTitle2 = Font.system(size: 22, weight: .bold)
    static let rpTitle3 = Font.system(size: 20, weight: .semibold)

    // æœ¬æ–‡
    static let rpBody = Font.system(size: 17, weight: .regular)
    static let rpBodyBold = Font.system(size: 17, weight: .semibold)
    static let rpCallout = Font.system(size: 16, weight: .regular)

    // è£œè¶³
    static let rpSubheadline = Font.system(size: 15, weight: .regular)
    static let rpFootnote = Font.system(size: 13, weight: .regular)
    static let rpCaption1 = Font.system(size: 12, weight: .regular)
    static let rpCaption2 = Font.system(size: 11, weight: .regular)

    // å˜èªã‚«ãƒ¼ãƒ‰ç”¨
    static let rpWordJapanese = Font.system(size: 32, weight: .bold)
    static let rpWordEnglish = Font.system(size: 28, weight: .medium)
    static let rpPhonetic = Font.system(size: 18, weight: .regular)
}
```

### 15.3 ãƒœã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«

```swift
// MARK: - ButtonStyles.swift

import SwiftUI

// ãƒ—ãƒ©ã‚¤ãƒãƒªãƒœã‚¿ãƒ³
struct RPPrimaryButtonStyle: ButtonStyle {
    var isEnabled: Bool = true

    func makeBody(configuration: Configuration) -> some View {
        configuration.label
            .font(.rpBodyBold)
            .foregroundColor(.white)
            .frame(maxWidth: .infinity)
            .padding(.vertical, 16)
            .background(isEnabled ? Color.rpPrimary : Color.gray)
            .cornerRadius(12)
            .opacity(configuration.isPressed ? 0.8 : 1.0)
            .animation(.easeInOut(duration: 0.1), value: configuration.isPressed)
    }
}

// ã‚»ã‚«ãƒ³ãƒ€ãƒªãƒœã‚¿ãƒ³
struct RPSecondaryButtonStyle: ButtonStyle {
    func makeBody(configuration: Configuration) -> some View {
        configuration.label
            .font(.rpBodyBold)
            .foregroundColor(.rpPrimary)
            .frame(maxWidth: .infinity)
            .padding(.vertical, 16)
            .background(Color.rpPrimary.opacity(0.1))
            .cornerRadius(12)
            .overlay(
                RoundedRectangle(cornerRadius: 12)
                    .stroke(Color.rpPrimary, lineWidth: 1)
            )
            .opacity(configuration.isPressed ? 0.8 : 1.0)
    }
}

// ã‚«ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«
struct RPCardStyle: ViewModifier {
    func body(content: Content) -> some View {
        content
            .background(Color.rpCardBackground)
            .cornerRadius(16)
            .shadow(color: .black.opacity(0.05), radius: 8, x: 0, y: 2)
    }
}

extension View {
    func rpCardStyle() -> some View {
        modifier(RPCardStyle())
    }
}
```

---

## 16. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### 16.1 ã‚¨ãƒ©ãƒ¼å‹å®šç¾©

```swift
// MARK: - AppError.swift

import Foundation

enum AppError: LocalizedError {
    // ãƒ‡ãƒ¼ã‚¿é–¢é€£
    case dataLoadFailed(String)
    case dataSaveFailed(String)
    case cardNotFound
    case deckNotFound

    // éŸ³å£°èªè­˜é–¢é€£
    case speechRecognitionNotAuthorized
    case speechRecognitionFailed(String)
    case microphoneNotAvailable

    // èª²é‡‘é–¢é€£
    case purchaseFailed(String)
    case purchaseNotVerified
    case productNotFound

    // ãƒ•ã‚¡ã‚¤ãƒ«é–¢é€£
    case csvParsingFailed(String)
    case fileAccessDenied
    case invalidFileFormat

    // ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é–¢é€£
    case networkError(String)

    var errorDescription: String? {
        switch self {
        case .dataLoadFailed(let detail):
            return "ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ: \(detail)"
        case .dataSaveFailed(let detail):
            return "ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ: \(detail)"
        case .cardNotFound:
            return "ã‚«ãƒ¼ãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"
        case .deckNotFound:
            return "ãƒ‡ãƒƒã‚­ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"
        case .speechRecognitionNotAuthorized:
            return "éŸ³å£°èªè­˜ãŒè¨±å¯ã•ã‚Œã¦ã„ã¾ã›ã‚“"
        case .speechRecognitionFailed(let detail):
            return "éŸ³å£°èªè­˜ã«å¤±æ•—ã—ã¾ã—ãŸ: \(detail)"
        case .microphoneNotAvailable:
            return "ãƒã‚¤ã‚¯ãŒä½¿ç”¨ã§ãã¾ã›ã‚“"
        case .purchaseFailed(let detail):
            return "è³¼å…¥ã«å¤±æ•—ã—ã¾ã—ãŸ: \(detail)"
        case .purchaseNotVerified:
            return "è³¼å…¥ã®æ¤œè¨¼ã«å¤±æ•—ã—ã¾ã—ãŸ"
        case .productNotFound:
            return "å•†å“ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"
        case .csvParsingFailed(let detail):
            return "CSVãƒ•ã‚¡ã‚¤ãƒ«ã®è§£æã«å¤±æ•—ã—ã¾ã—ãŸ: \(detail)"
        case .fileAccessDenied:
            return "ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒæ‹’å¦ã•ã‚Œã¾ã—ãŸ"
        case .invalidFileFormat:
            return "ç„¡åŠ¹ãªãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã§ã™"
        case .networkError(let detail):
            return "ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼: \(detail)"
        }
    }

    var recoverySuggestion: String? {
        switch self {
        case .speechRecognitionNotAuthorized:
            return "è¨­å®šã‚¢ãƒ—ãƒªã‚’é–‹ã„ã¦éŸ³å£°èªè­˜ã‚’è¨±å¯ã—ã¦ãã ã•ã„"
        case .microphoneNotAvailable:
            return "è¨­å®šã‚¢ãƒ—ãƒªã‚’é–‹ã„ã¦ãƒã‚¤ã‚¯ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã—ã¦ãã ã•ã„"
        case .fileAccessDenied:
            return "ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒ—ãƒªã§è©²å½“ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’ç¢ºèªã—ã¦ãã ã•ã„"
        default:
            return nil
        }
    }
}
```

---

## 17. ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### 17.1 SM2AlgorithmTests

```swift
import XCTest
@testable import Repitan

final class SM2AlgorithmTests: XCTestCase {

    func testNewCardAgainRating() {
        // æ–°è¦ã‚«ãƒ¼ãƒ‰ã§ã€Œå…¨ç„¶ãƒ€ãƒ¡ã€â†’ 3åˆ†å¾Œã«å†è¡¨ç¤º
        let card = Card(japanese: "ãƒ†ã‚¹ãƒˆ", english: "test")
        card.status = .new
        card.learningStep = 0

        let result = SM2Algorithm.calculate(card: card, rating: .again)

        XCTAssertEqual(result.learningStep, 0)
        XCTAssertEqual(result.newStatus, .learning)
        XCTAssertNotNil(result.learningDueDate)
    }

    func testNewCardHardRating() {
        // æ–°è¦ã‚«ãƒ¼ãƒ‰ã§ã€Œå°‘ã—è€ƒãˆãŸã€â†’ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¸
        let card = Card(japanese: "ãƒ†ã‚¹ãƒˆ", english: "test")
        card.status = .new
        card.learningStep = 0

        let result = SM2Algorithm.calculate(card: card, rating: .hard)

        XCTAssertEqual(result.learningStep, 1)
        XCTAssertEqual(result.newStatus, .learning)
    }

    func testNewCardEasyRating() {
        // æ–°è¦ã‚«ãƒ¼ãƒ‰ã§ã€Œå®Œç’§ã€â†’ å³å’æ¥­ã€4æ—¥å¾Œã«å¾©ç¿’
        let card = Card(japanese: "ãƒ†ã‚¹ãƒˆ", english: "test")
        card.status = .new
        card.learningStep = 0

        let result = SM2Algorithm.calculate(card: card, rating: .easy)

        XCTAssertEqual(result.learningStep, -1)
        XCTAssertEqual(result.interval, 4)
        XCTAssertEqual(result.newStatus, .review)
    }

    func testLearningGraduation() {
        // å­¦ç¿’ä¸­ã‚«ãƒ¼ãƒ‰ãŒå’æ¥­ã™ã‚‹ã‚±ãƒ¼ã‚¹
        let card = Card(japanese: "ãƒ†ã‚¹ãƒˆ", english: "test")
        card.status = .learning
        card.learningStep = 1  // æœ€å¾Œã®ã‚¹ãƒ†ãƒƒãƒ—

        let result = SM2Algorithm.calculate(card: card, rating: .hard)

        XCTAssertEqual(result.learningStep, -1)
        XCTAssertEqual(result.interval, 1)
        XCTAssertEqual(result.newStatus, .review)
    }

    func testReviewCardAgainRating() {
        // å¾©ç¿’ã‚«ãƒ¼ãƒ‰ã§ã€Œå…¨ç„¶ãƒ€ãƒ¡ã€â†’ å†å­¦ç¿’ã¸
        let card = Card(japanese: "ãƒ†ã‚¹ãƒˆ", english: "test")
        card.status = .review
        card.interval = 10
        card.easeFactor = 2.5

        let result = SM2Algorithm.calculate(card: card, rating: .again)

        XCTAssertEqual(result.newStatus, .relearning)
        XCTAssertEqual(result.lapses, 1)
        XCTAssertLessThan(result.easeFactor, 2.5)
        XCTAssertNotNil(result.learningDueDate)
    }

    func testReviewCardEasyRating() {
        // å¾©ç¿’ã‚«ãƒ¼ãƒ‰ã§ã€Œå®Œç’§ã€â†’ é–“éš”Ã—EF
        let card = Card(japanese: "ãƒ†ã‚¹ãƒˆ", english: "test")
        card.status = .review
        card.interval = 10
        card.easeFactor = 2.5

        let result = SM2Algorithm.calculate(card: card, rating: .easy)

        XCTAssertEqual(result.interval, 25)  // 10 * 2.5
        XCTAssertEqual(result.newStatus, .mastered)  // 21æ—¥ä»¥ä¸Š
    }

    func testEaseFactorMinimum() {
        // EFã¯1.3ä»¥ä¸‹ã«ãªã‚‰ãªã„
        let card = Card(japanese: "ãƒ†ã‚¹ãƒˆ", english: "test")
        card.status = .review
        card.easeFactor = 1.3
        card.interval = 5

        let result = SM2Algorithm.calculate(card: card, rating: .again)

        XCTAssertGreaterThanOrEqual(result.easeFactor, 1.3)
    }

    func testEaseFactorMaximum() {
        // EFã¯3.0ä»¥ä¸Šã«ãªã‚‰ãªã„
        let card = Card(japanese: "ãƒ†ã‚¹ãƒˆ", english: "test")
        card.status = .review
        card.easeFactor = 2.9
        card.interval = 5

        let result = SM2Algorithm.calculate(card: card, rating: .easy)

        XCTAssertLessThanOrEqual(result.easeFactor, 3.0)
    }
}
```

### 17.2 CSVParserTests

```swift
import XCTest
@testable import Repitan

final class CSVParserTests: XCTestCase {

    func testBasicParsing() {
        let csv = """
        è‹±å˜èª,æ—¥æœ¬èª
        apple,ã‚Šã‚“ã”
        book,æœ¬
        """

        let result = CSVParser.parse(csvString: csv)

        XCTAssertEqual(result.validCards.count, 2)
        XCTAssertEqual(result.validCards[0].english, "apple")
        XCTAssertEqual(result.validCards[0].japanese, "ã‚Šã‚“ã”")
    }

    func testDuplicateSkipping() {
        let csv = """
        è‹±å˜èª,æ—¥æœ¬èª
        apple,ã‚Šã‚“ã”
        apple,ãƒªãƒ³ã‚´
        """

        let result = CSVParser.parse(csvString: csv)

        XCTAssertEqual(result.validCards.count, 1)
        XCTAssertEqual(result.skippedCount, 1)
    }

    func testQuotedFields() {
        let csv = """
        è‹±å˜èª,æ—¥æœ¬èª,ä¾‹æ–‡
        hello,ã“ã‚“ã«ã¡ã¯,"Hello, world!"
        """

        let result = CSVParser.parse(csvString: csv)

        XCTAssertEqual(result.validCards[0].example, "Hello, world!")
    }

    func testEmptyLinesIgnored() {
        let csv = """
        è‹±å˜èª,æ—¥æœ¬èª

        apple,ã‚Šã‚“ã”

        book,æœ¬

        """

        let result = CSVParser.parse(csvString: csv)

        XCTAssertEqual(result.validCards.count, 2)
    }

    func testExtendedFormat() {
        let csv = """
        è‹±å˜èª,æ—¥æœ¬èª,ç™ºéŸ³è¨˜å·,ä¾‹æ–‡(è‹±èª),ä¾‹æ–‡(æ—¥æœ¬èª)
        apple,ã‚Šã‚“ã”,/ËˆÃ¦pÉ™l/,I eat an apple.,ç§ã¯ã‚Šã‚“ã”ã‚’é£Ÿã¹ã¾ã™ã€‚
        """

        let result = CSVParser.parse(csvString: csv)

        XCTAssertEqual(result.validCards[0].phonetic, "/ËˆÃ¦pÉ™l/")
        XCTAssertEqual(result.validCards[0].example, "I eat an apple.")
        XCTAssertEqual(result.validCards[0].exampleJapanese, "ç§ã¯ã‚Šã‚“ã”ã‚’é£Ÿã¹ã¾ã™ã€‚")
    }
}
```

### 17.3 StreakCalculatorTests

```swift
import XCTest
import SwiftData
@testable import Repitan

final class StreakCalculatorTests: XCTestCase {
    var modelContainer: ModelContainer!
    var modelContext: ModelContext!

    override func setUpWithError() throws {
        let config = ModelConfiguration(isStoredInMemoryOnly: true)
        modelContainer = try ModelContainer(for: DailyStats.self, configurations: config)
        modelContext = modelContainer.mainContext
    }

    func testConsecutiveDays() throws {
        // 3æ—¥é€£ç¶šã§å­¦ç¿’
        createDailyStats(daysAgo: 0, studied: true)
        createDailyStats(daysAgo: 1, studied: true)
        createDailyStats(daysAgo: 2, studied: true)

        let streak = StreakCalculator.calculate(modelContext: modelContext)

        XCTAssertEqual(streak, 3)
    }

    func testBrokenStreak() throws {
        // ä»Šæ—¥ã¨3æ—¥å‰ï¼ˆ1æ—¥ç©ºãï¼‰
        createDailyStats(daysAgo: 0, studied: true)
        createDailyStats(daysAgo: 2, studied: true)

        let streak = StreakCalculator.calculate(modelContext: modelContext)

        XCTAssertEqual(streak, 1)
    }

    func testNoStudyToday() throws {
        // æ˜¨æ—¥ã¾ã§3æ—¥é€£ç¶šã€ä»Šæ—¥ã¯ã¾ã 
        createDailyStats(daysAgo: 1, studied: true)
        createDailyStats(daysAgo: 2, studied: true)
        createDailyStats(daysAgo: 3, studied: true)

        let streak = StreakCalculator.calculate(modelContext: modelContext)

        XCTAssertEqual(streak, 3)  // æ˜¨æ—¥ã¾ã§ã®ã‚¹ãƒˆãƒªãƒ¼ã‚¯ã¯ç¶­æŒ
    }

    func testNoStudyYesterdayOrToday() throws {
        // 2æ—¥å‰ã¾ã§å­¦ç¿’ã€æ˜¨æ—¥ã‚‚ä»Šæ—¥ã‚‚æœªå­¦ç¿’
        createDailyStats(daysAgo: 2, studied: true)
        createDailyStats(daysAgo: 3, studied: true)

        let streak = StreakCalculator.calculate(modelContext: modelContext)

        XCTAssertEqual(streak, 0)  // ã‚¹ãƒˆãƒªãƒ¼ã‚¯é€”åˆ‡ã‚Œ
    }

    private func createDailyStats(daysAgo: Int, studied: Bool) {
        let date = Calendar.current.date(byAdding: .day, value: -daysAgo, to: Date())!
        let stats = DailyStats(date: date)
        if studied {
            stats.newCardsCount = 5
            stats.reviewCardsCount = 10
        }
        modelContext.insert(stats)
        try? modelContext.save()
    }
}
```

---

## 18. Info.plistè¨­å®š

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <!-- éŸ³å£°èªè­˜ -->
    <key>NSSpeechRecognitionUsageDescription</key>
    <string>è‹±å˜èªã®ç™ºéŸ³ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã«éŸ³å£°èªè­˜ã‚’ä½¿ç”¨ã—ã¾ã™</string>

    <!-- ãƒã‚¤ã‚¯ -->
    <key>NSMicrophoneUsageDescription</key>
    <string>è‹±å˜èªã‚’å£°ã§ç­”ãˆã‚‹ãŸã‚ã«ãƒã‚¤ã‚¯ã‚’ä½¿ç”¨ã—ã¾ã™</string>

    <!-- AdMob App IDï¼ˆæœ¬ç•ªç”¨ã«å·®ã—æ›¿ãˆï¼‰ -->
    <key>GADApplicationIdentifier</key>
    <string>ca-app-pub-XXXXXXXXXXXXXXXX~XXXXXXXXXX</string>

    <!-- ATT (App Tracking Transparency) -->
    <key>NSUserTrackingUsageDescription</key>
    <string>ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã•ã‚ŒãŸåºƒå‘Šã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã—ã¾ã™ã€‚åºƒå‘Šå‰Šé™¤ã‚’è³¼å…¥ã™ã‚‹ã¨ã€ã“ã®è¿½è·¡ã¯è¡Œã‚ã‚Œã¾ã›ã‚“ã€‚</string>

    <!-- ç”»é¢å›è»¢ã‚µãƒãƒ¼ãƒˆ -->
    <key>UISupportedInterfaceOrientations</key>
    <array>
        <string>UIInterfaceOrientationPortrait</string>
    </array>
</dict>
</plist>
```

---

## 19. App Storeæƒ…å ±

### 19.1 ã‚¢ãƒ—ãƒªå
**ãƒªãƒ”ãŸã‚“ - è‹±å˜èªæš—è¨˜**

### 19.2 ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«
ç§‘å­¦çš„å­¦ç¿’æ³•ã§åŠ¹ç‡ã‚ˆãè¦šãˆã‚‹

### 19.3 èª¬æ˜æ–‡

```
ã€ãƒªãƒ”ãŸã‚“ã€‘ã¯ã€ç§‘å­¦çš„ã«å®Ÿè¨¼ã•ã‚ŒãŸã€Œé–“éš”åå¾©å­¦ç¿’ã€ã§è‹±å˜èªã‚’åŠ¹ç‡ã‚ˆãè¦šãˆã‚‰ã‚Œã‚‹ã‚¢ãƒ—ãƒªã§ã™ã€‚

â–¼ ç‰¹å¾´
ãƒ»å¿˜ã‚Œã‹ã‘ãŸé ƒã«è‡ªå‹•ã§å¾©ç¿’ã‚’ãƒªãƒã‚¤ãƒ³ãƒ‰
ãƒ»ä¸­å­¦æ•™ç§‘æ›¸ï¼ˆNew Horizonã€Sunshineï¼‰å¯¾å¿œ
ãƒ»ä¿è­·è€…å‘ã‘ã®å­¦ç¿’ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½
ãƒ»ã‚·ãƒ³ãƒ—ãƒ«ã§ä½¿ã„ã‚„ã™ã„UI

â–¼ ã“ã‚“ãªæ–¹ã«ãŠã™ã™ã‚
ãƒ»è‹±å˜èªãŒãªã‹ãªã‹è¦šãˆã‚‰ã‚Œãªã„ä¸­å­¦ç”Ÿ
ãƒ»ãŠå­ã•ã‚“ã®å­¦ç¿’é€²æ—ã‚’æŠŠæ¡ã—ãŸã„ä¿è­·è€…
ãƒ»åŠ¹ç‡çš„ãªå­¦ç¿’æ–¹æ³•ã‚’æ¢ã—ã¦ã„ã‚‹æ–¹

â–¼ å­¦ç¿’ã®æµã‚Œ
1. æ–°ã—ã„å˜èªã‚’è¦šãˆã‚‹ï¼ˆ1æ—¥10èªï¼‰
2. ç¿Œæ—¥ä»¥é™ã€ã‚¢ãƒ—ãƒªãŒãƒ™ã‚¹ãƒˆãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å¾©ç¿’ã‚’æç¤º
3. ã€Œå…¨ç„¶ãƒ€ãƒ¡ã€ã€Œå°‘ã—è€ƒãˆãŸã€ã€Œå®Œç’§ï¼ã€ã®3æ®µéšã§è‡ªå·±è©•ä¾¡
4. è©•ä¾¡ã«å¿œã˜ã¦æ¬¡ã®å¾©ç¿’æ—¥ãŒè‡ªå‹•èª¿æ•´

â–¼ ä¸»ãªæ©Ÿèƒ½
ãƒ»SM-2ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ã‚ˆã‚‹æœ€é©ãªå¾©ç¿’ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
ãƒ»é€£ç¶šå­¦ç¿’æ—¥æ•°ï¼ˆã‚¹ãƒˆãƒªãƒ¼ã‚¯ï¼‰è¡¨ç¤º
ãƒ»éŸ³å£°èªè­˜ã«ã‚ˆã‚‹ç™ºéŸ³ãƒã‚§ãƒƒã‚¯
ãƒ»CSVã‚¤ãƒ³ãƒãƒ¼ãƒˆã§ã‚ªãƒªã‚¸ãƒŠãƒ«å˜èªå¸³ä½œæˆ
ãƒ»ä¿è­·è€…å‘ã‘PINä¿è­·ãƒ¬ãƒãƒ¼ãƒˆ

â–¼ å¯¾å¿œæ•™ç§‘æ›¸
ãƒ»New Horizon 1ã€œ3å¹´
ãƒ»Sunshine 1ã€œ3å¹´
ãƒ»è‹±æ¤œ5ç´šã€œ3ç´š

â€» åºƒå‘Šã‚’å‰Šé™¤ã™ã‚‹ã‚¢ãƒ—ãƒªå†…èª²é‡‘ãŒã‚ã‚Šã¾ã™ï¼ˆÂ¥480 è²·ã„åˆ‡ã‚Šï¼‰
```

### 19.4 ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰

```
è‹±å˜èª,æš—è¨˜,ä¸­å­¦,è‹±èª,å˜èªå¸³,ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚«ãƒ¼ãƒ‰,å­¦ç¿’,å‹‰å¼·,æ•™ç§‘æ›¸,New Horizon
```

### 19.5 ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼è¦ç‚¹

- åé›†ãƒ‡ãƒ¼ã‚¿ï¼šå­¦ç¿’å±¥æ­´ï¼ˆç«¯æœ«å†…ã®ã¿ä¿å­˜ï¼‰
- åºƒå‘Šï¼šGoogle AdMobä½¿ç”¨ï¼ˆATTå¯¾å¿œï¼‰
- ç¬¬ä¸‰è€…æä¾›ï¼šãªã—ï¼ˆåºƒå‘Šç›®çš„ã®IDã®ã¿ï¼‰
- å­ä¾›ã®ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ï¼š13æ­³æœªæº€ã®å€‹äººæƒ…å ±ã¯åé›†ã—ãªã„

---

## 20. é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚º

### Phase 1: MVP
- [ ] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [ ] SwiftDataãƒ¢ãƒ‡ãƒ«å®Ÿè£…
- [ ] ãƒ›ãƒ¼ãƒ ç”»é¢ï¼ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼‰
- [ ] å­¦ç¿’ã‚»ãƒƒã‚·ãƒ§ãƒ³é¸æŠç”»é¢
- [ ] æ–°è¦å­¦ç¿’ç”»é¢
- [ ] ãƒ†ã‚¹ãƒˆç”»é¢ï¼ˆè‡ªå·±ç”³å‘Šå¼ï¼‰
- [ ] SM-2ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ å®Ÿè£…
- [ ] ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†ç”»é¢
- [ ] ã‚¹ãƒˆãƒªãƒ¼ã‚¯è¨ˆç®—

### Phase 2: æ‹¡å¼µæ©Ÿèƒ½
- [ ] ã‚«ãƒ¼ãƒ‰ç®¡ç†ç”»é¢ï¼ˆãƒ‡ãƒƒã‚­ä¸€è¦§ã€ã‚«ãƒ¼ãƒ‰ä¸€è¦§ï¼‰
- [ ] ã‚«ãƒ¼ãƒ‰è¿½åŠ /ç·¨é›†ç”»é¢
- [ ] ãƒ‡ãƒƒã‚­ä½œæˆç”»é¢
- [ ] æ•™ç§‘æ›¸åˆ¥å˜èªã‚»ãƒƒãƒˆï¼ˆJSONãƒ‡ãƒ¼ã‚¿ä½œæˆï¼‰
- [ ] éŸ³å£°èªè­˜ï¼ˆSpeech Frameworkï¼‰
- [ ] TTSç™ºéŸ³å†ç”Ÿ
- [ ] ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆãƒãƒƒã‚¸ã€å®Ÿç¸¾ï¼‰

### Phase 3: è¦ªå‘ã‘æ©Ÿèƒ½ + åç›ŠåŒ–
- [ ] è¦ªå‘ã‘ãƒ¬ãƒãƒ¼ãƒˆç”»é¢
- [ ] PINèªè¨¼
- [ ] é€±é–“ãƒ¬ãƒãƒ¼ãƒˆ
- [ ] é€šçŸ¥æ©Ÿèƒ½
- [ ] AdMobåºƒå‘Š
- [ ] åºƒå‘Šå‰Šé™¤èª²é‡‘ï¼ˆStoreKit 2ï¼‰

### Phase 4: ä»•ä¸Šã’
- [ ] ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢
- [ ] UI/UXãƒ–ãƒ©ãƒƒã‚·ãƒ¥ã‚¢ãƒƒãƒ—
- [ ] ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ
- [ ] ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œ
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- [ ] ãƒ†ã‚¹ãƒˆ
- [ ] App Storeç”³è«‹æº–å‚™

---

## 21. æ›´æ–°å±¥æ­´

### 2026-01-01 ã‚»ãƒƒã‚·ãƒ§ãƒ³4

#### æ–°æ©Ÿèƒ½

##### æ´»ç”¨å½¢å‡ºé¡Œãƒ¢ãƒ¼ãƒ‰ï¼ˆConjugation Modeï¼‰
å˜èªå¸³ã”ã¨ã«è¨­å®šå¯èƒ½ãªæ´»ç”¨å½¢å‡ºé¡Œæ©Ÿèƒ½ã‚’è¿½åŠ ã€‚

| ãƒ¢ãƒ¼ãƒ‰ | èª¬æ˜ |
|--------|------|
| `presentOnly` | ç¾åœ¨å½¢ï¼ˆåŸå½¢ï¼‰ã®ã¿ã‚’å‡ºé¡Œï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ |
| `presentAndPast` | ç¾åœ¨å½¢ï¼‹éå»å½¢ã‚’å‡ºé¡Œ |
| `allForms` | ç¾åœ¨å½¢ï¼‹éå»å½¢ï¼‹éå»åˆ†è©ã‚’å‡ºé¡Œ |

- **è¨­å®šå ´æ‰€**: å˜èªå¸³è©³ç´°ç”»é¢ â†’ ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â†’ å˜èªå¸³è¨­å®š
- **å‹•ä½œ**: éå»å½¢ãƒ»éå»åˆ†è©ã‚’æŒã¤ã‚«ãƒ¼ãƒ‰ã®ã¿è¤‡åˆå…¥åŠ›UIã‚’è¡¨ç¤º
- **åˆ¤å®š**: å…¨ã¦ã®æ´»ç”¨å½¢ã‚’æ­£è§£ã—ãªã„ã¨å¾©ç¿’æ¸ˆã¿ã«ãªã‚‰ãªã„
- **ç™ºéŸ³**: è‡ªå‹•ç™ºéŸ³å†ç”Ÿæ™‚ã«è¨­å®šã«å¿œã˜ã¦å…¨æ´»ç”¨å½¢ã‚’é †ç•ªã«ç™ºéŸ³

##### å˜èªå¸³å‰Šé™¤æ©Ÿèƒ½
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆã®å˜èªå¸³ï¼ˆãƒã‚¤å˜èªå¸³ï¼‰ã‚’å‰Šé™¤å¯èƒ½ã«
- å‰Šé™¤å‰ã«ç¢ºèªã‚¢ãƒ©ãƒ¼ãƒˆã‚’è¡¨ç¤ºï¼ˆå˜èªå¸³åã¨ã‚«ãƒ¼ãƒ‰æ•°ã‚’è¡¨ç¤ºï¼‰
- ãƒ“ãƒ«ãƒˆã‚¤ãƒ³å˜èªå¸³ï¼ˆå­¦å¹´åˆ¥ï¼‰ã¯å‰Šé™¤ä¸å¯

##### é€£ç¶šç™ºéŸ³æ©Ÿèƒ½ï¼ˆTTSManagerï¼‰
- `speakSequence()`: è¤‡æ•°ã®å˜èªã‚’é †ç•ªã«ç™ºéŸ³
- å˜èªé–“ã®é–“éš”: 0.8ç§’
- æ´»ç”¨å½¢ãƒ¢ãƒ¼ãƒ‰ã§åŸå½¢â†’éå»å½¢â†’éå»åˆ†è©ã®é †ã«ç™ºéŸ³

#### å¤‰æ›´

##### æ–°è¦å˜èªå¸³ä½œæˆæ™‚ã®è‡ªå‹•é¸æŠã‚’ç„¡åŠ¹åŒ–
- æ–°ã—ã„å˜èªå¸³ã‚’ä½œæˆã—ã¦ã‚‚è‡ªå‹•çš„ã«å­¦ç¿’å¯¾è±¡ã«ãªã‚‰ãªã„
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ˜ç¤ºçš„ã«é¸æŠã™ã‚‹å¿…è¦ãŒã‚ã‚‹

##### ã€Œç­”ãˆã‚’è¦‹ã‚‹ã€ãƒœã‚¿ãƒ³ã®å‹•ä½œæ”¹å–„
- æ´»ç”¨å½¢ãƒ¢ãƒ¼ãƒ‰æ™‚ã€å…¥åŠ›å†…å®¹ã«åŸºã¥ã„ã¦æ­£èª¤åˆ¤å®šã‚’å®Ÿè¡Œ
- ç©ºæ¬„ã¯ä¸æ­£è§£ã¨ã—ã¦æ‰±ã†
- è¨­å®šã«å¿œã˜ãŸå…¨æ´»ç”¨å½¢ã®ç™ºéŸ³ã‚’å®Ÿè¡Œ

#### å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´å†…å®¹ |
|---------|---------|
| Deck.swift | `ConjugationMode` enumè¿½åŠ ã€`conjugationModeRaw`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£è¿½åŠ  |
| DeckDetailView.swift | å˜èªå¸³è¨­å®šç”»é¢è¿½åŠ ã€å‰Šé™¤æ©Ÿèƒ½è¿½åŠ  |
| TestView.swift | æ´»ç”¨å½¢å…¥åŠ›UIè¿½åŠ ã€æ­£èª¤åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯è¿½åŠ  |
| TTSManager.swift | `speakSequence()`ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ  |
| CreateDeckView.swift | `deck.isActive = false`è¨­å®šè¿½åŠ  |
| ButtonStyles.swift | `RPSecondaryButtonStyle`ã«`isEnabled`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¿½åŠ  |
